# Djangoベース発注管理システム 要件定義テンプレート

## 1. プロジェクト基本情報

### 1.1 プロジェクト概要
- **システム名称**: [例: ProcureFlow - 統合発注管理システム]
- **目的**: [例: 発注業務の効率化、コスト削減、サプライヤー管理の最適化]
- **対象業種**: [例: 製造業 / 小売業 / 卸売業 / 飲食業 / 建設業]
- **発注規模**: [例: 月間発注件数○件 / 取引サプライヤー数○社 / 購買品目数○品目]
- **想定ユーザー数**: [例: 購買担当10名、承認者5名、受領担当20名]
- **開発フェーズ**: [プロトタイプ / MVP / 本番環境]

### 1.2 発注管理システムの範囲定義（該当するものに✓）

#### A. 発注計画・需要管理
- [ ] **発注計画策定**
  - [ ] 需要予測（過去データ分析）
  - [ ] 安全在庫・発注点管理
  - [ ] 発注提案（自動発注点割れ検知）
  - [ ] MRP（資材所要量計画）連携
  - [ ] 季節変動考慮

- [ ] **購買予算管理**
  - [ ] 予算設定・配分
  - [ ] 予算消化状況監視
  - [ ] 予算超過アラート
  - [ ] 部門別予算管理

#### B. サプライヤー管理
- [ ] **サプライヤーマスタ管理**
  - [ ] 基本情報管理（会社名、住所、担当者）
  - [ ] 取引条件管理（支払条件、リードタイム）
  - [ ] 評価・レーティング
  - [ ] 認定・監査記録
  - [ ] 与信管理

- [ ] **見積管理**
  - [ ] 見積依頼書（RFQ）作成
  - [ ] 複数サプライヤーへ一括見積依頼
  - [ ] 見積回答登録
  - [ ] 見積比較表作成
  - [ ] 見積有効期限管理

- [ ] **サプライヤー評価**
  - [ ] 納期遵守率
  - [ ] 品質評価
  - [ ] 価格競争力
  - [ ] 対応力・サービス評価
  - [ ] 総合スコアリング

#### C. 発注業務
- [ ] **発注書作成**
  - [ ] 手動発注書作成
  - [ ] 発注提案からの自動作成
  - [ ] 見積書からの発注書変換
  - [ ] 過去発注履歴からのコピー
  - [ ] テンプレート利用

- [ ] **発注承認ワークフロー**
  - [ ] 多段階承認（申請→課長→部長→承認）
  - [ ] 金額別承認ルート
  - [ ] 品目別承認ルート
  - [ ] 差し戻し・却下機能
  - [ ] 代理承認機能

- [ ] **発注書発行**
  - [ ] PDF自動生成
  - [ ] メール自動送信
  - [ ] FAX送信連携
  - [ ] EDI（電子データ交換）連携
  - [ ] 発注番号自動採番

#### D. 納期・進捗管理
- [ ] **納期管理**
  - [ ] 納期回答登録（サプライヤーから）
  - [ ] 納期遅延アラート
  - [ ] 納期変更履歴管理
  - [ ] 催促メール自動送信
  - [ ] 納期カレンダー表示

- [ ] **進捗管理**
  - [ ] 製造進捗報告（サプライヤーから）
  - [ ] 出荷予定日通知
  - [ ] 輸送中ステータス
  - [ ] 到着予定日管理

#### E. 入荷・検収管理
- [ ] **入荷処理**
  - [ ] 入荷予定一覧
  - [ ] 入荷実績登録
  - [ ] 発注書との照合
  - [ ] 部分入荷対応
  - [ ] 過不足管理

- [ ] **検収処理**
  - [ ] 品質検査記録
  - [ ] 合格・不合格判定
  - [ ] 不良品返品処理
  - [ ] 検収書発行
  - [ ] 検収完了通知

#### F. 支払・請求管理
- [ ] **請求書管理**
  - [ ] 請求書受領登録
  - [ ] 発注書・納品書との三点照合
  - [ ] 請求書承認ワークフロー
  - [ ] 差異・誤差管理
  - [ ] 請求保留・調整

- [ ] **支払管理**
  - [ ] 支払予定一覧
  - [ ] 支払承認
  - [ ] 支払データ出力（全銀フォーマット等）
  - [ ] 支払実績記録
  - [ ] 未払金管理

- [ ] **会計連携**
  - [ ] 仕訳データ自動生成
  - [ ] 会計システムへAPI連携
  - [ ] 部門別原価管理
  - [ ] プロジェクト別原価管理

#### G. 在庫連携
- [ ] **在庫管理連携**
  - [ ] 発注による引当予定登録
  - [ ] 入荷による在庫増加
  - [ ] 在庫数リアルタイム連携
  - [ ] 在庫切れアラート
  - [ ] ロット・シリアル番号管理

#### H. レポート・分析
- [ ] **購買レポート**
  - [ ] 発注実績レポート（日次・月次・年次）
  - [ ] サプライヤー別購買額
  - [ ] 品目別購買額
  - [ ] 部門別購買額
  - [ ] コスト削減効果分析

- [ ] **KPIダッシュボード**
  - [ ] 発注リードタイム
  - [ ] 納期遵守率
  - [ ] 価格変動トレンド
  - [ ] 購買コスト推移
  - [ ] サプライヤー評価スコア

---

## 2. ビジネス要件

### 2.1 解決したい課題（優先度: 高/中/低）
| 課題 | 現状 | 理想 | 優先度 |
|------|------|------|--------|
| [例: 発注業務の属人化] | [担当者不在時に発注不可] | [誰でも発注可能、履歴参照可] | 高 |
| [例: 承認プロセスの遅延] | [紙ベース、上司不在で停滞] | [電子承認、代理承認可能] | 高 |
| [例: 納期遅延の把握困難] | [サプライヤーに電話確認] | [システムで自動アラート] | 中 |
| [例: 発注ミス（数量・品目）] | [手入力ミス、年間○件] | [過去データ参照、警告表示] | 高 |
| [例: サプライヤー選定の非効率] | [過去実績が不明瞭] | [評価スコア・価格履歴参照可] | 中 |
| | | | |

### 2.2 主要ユーザーロール
| ロール名 | 主な業務 | 権限レベル | 人数 | 利用デバイス |
|----------|----------|------------|------|--------------|
| [例: 購買担当] | [発注書作成、見積依頼] | [発注申請] | [10名] | [PC] |
| [例: 課長] | [発注承認（50万円以下）] | [承認権限L1] | [5名] | [PC/スマホ] |
| [例: 部長] | [発注承認（500万円以下）] | [承認権限L2] | [3名] | [PC/スマホ] |
| [例: 経営層] | [高額発注承認（500万円超）] | [承認権限L3] | [2名] | [PC/スマホ] |
| [例: 受領担当] | [入荷処理、検収] | [入荷権限] | [20名] | [PC/タブレット] |
| [例: 経理担当] | [請求書照合、支払処理] | [支払権限] | [5名] | [PC] |
| [例: サプライヤー] | [見積回答、納期回答] | [参照・入力限定] | [不特定] | [PC/スマホ] |
| | | | | |

### 2.3 業務フロー（代表的なもの）

#### フロー1: 通常発注業務フロー
```
1. 在庫が発注点に到達 → システムアラート
2. 購買担当が発注提案を確認
3. サプライヤー選定（過去実績・評価参照）
4. 発注書作成（品目・数量・納期指定）
5. 承認申請（金額に応じた承認ルート）
6. 承認者が承認（スマホからも可能）
7. 発注書PDF自動生成・メール送信
8. サプライヤーが納期回答
9. システムに納期登録、納期管理開始
10. 納期前にリマインドメール
11. 入荷実績登録
12. 検収処理
13. 請求書受領・三点照合
14. 支払処理
```

#### フロー2: 見積比較発注フロー
```
1. 新規品目または高額品目の発注必要
2. 複数サプライヤーに見積依頼書（RFQ）送信
3. 各サプライヤーが見積回答
4. システムで見積比較表自動生成
5. 価格・納期・品質を総合評価
6. 最適サプライヤー選定
7. 発注書作成・承認フロー
```

#### フロー3: 緊急発注フロー
```
1. 緊急発注依頼（設備故障・欠品等）
2. 特急承認ルート適用
3. 承認者へSMS/メール通知
4. 即日承認
5. サプライヤーへ電話+システム発注
6. 特急料金加算
7. 納期短縮対応
```

#### フロー4: 発注変更フロー
```
1. 発注後に数量・納期変更が必要
2. 変更申請登録
3. 承認者承認
4. サプライヤーへ変更依頼
5. サプライヤーが変更可否回答
6. 変更確定・履歴記録
```

#### フロー5: 返品・不良品対応フロー
```
1. 入荷検収時に不良品発見
2. 不良品記録登録（写真添付）
3. サプライヤーへ返品依頼
4. 返品承認・輸送手配
5. 代替品再発注 or 返金処理
6. サプライヤー評価にマイナス記録
```

**記載してください:**
- [ ] 通常発注フロー
- [ ] 見積比較フロー
- [ ] 緊急発注フロー
- [ ] 発注変更フロー
- [ ] 返品・不良品対応フロー
- [ ] 定期発注フロー（継続契約品）
- [ ] その他重要フロー

---

## 3. 機能要件

### 3.1 必須機能（MVP）
| 機能カテゴリ | 機能名 | 詳細 | 優先度 |
|--------------|--------|------|--------|
| 発注書管理 | 発注書作成 | 品目選択、数量・単価入力、納期指定 | 必須 |
| | 発注書一覧 | 検索・絞込、ステータス表示 | 必須 |
| | 発注書詳細 | 履歴確認、PDF出力 | 必須 |
| | 発注書編集・キャンセル | 承認前のみ変更可能 | 必須 |
| 承認ワークフロー | 承認申請 | 承認ルート自動判定 | 必須 |
| | 承認・差し戻し | コメント入力、通知送信 | 必須 |
| | 承認状況確認 | リアルタイム進捗表示 | 必須 |
| サプライヤー管理 | サプライヤーマスタ | 基本情報、取引条件登録 | 必須 |
| | サプライヤー一覧 | 検索・絞込 | 必須 |
| | 取引履歴 | サプライヤー別発注履歴 | 高 |
| 見積管理 | 見積依頼作成 | 複数サプライヤー選択 | 高 |
| | 見積回答登録 | サプライヤーが回答入力 | 高 |
| | 見積比較表 | 価格・納期の比較表示 | 高 |
| 納期管理 | 納期一覧 | 納期カレンダー、遅延アラート | 必須 |
| | 納期回答登録 | サプライヤーが納期確定 | 必須 |
| 入荷管理 | 入荷予定一覧 | 今週・来週の入荷予定 | 必須 |
| | 入荷実績登録 | 発注書選択、実績数量入力 | 必須 |
| | 検収処理 | 合格・不合格判定 | 必須 |
| マスタ管理 | 品目マスタ | 品目コード、名称、単位、標準単価 | 必須 |
| | カテゴリマスタ | 品目分類管理 | 必須 |
| | 拠点マスタ | 複数拠点の場合 | 中 |
| 通知機能 | メール通知 | 承認依頼、納期アラート等 | 高 |
| | アプリ内通知 | 未読件数バッジ表示 | 中 |
| レポート | 発注実績レポート | 日次・月次集計 | 高 |
| | サプライヤー別購買額 | 月次・年次集計 | 中 |

**追加機能を記載:**
| | | | |
| | | | |

### 3.2 将来対応機能（Phase 2以降）
- [ ] **AI発注提案** - 過去データから最適発注量・タイミング提案
- [ ] **価格変動予測** - 市場価格トレンド分析
- [ ] **サプライヤーポータル** - サプライヤー専用ログイン画面
- [ ] **EDI連携** - 電子データ交換（JX手順、ebXML等）
- [ ] **ブロックチェーン証跡** - 発注～支払の改ざん防止
- [ ] **RPA連携** - 定型発注の自動化
- [ ] **OCR請求書読取** - 請求書スキャン自動データ化
- [ ] **多通貨対応** - 海外サプライヤー取引
- [ ] **多言語対応** - 英語・中国語等
- [ ] **モバイルアプリ** - 承認・確認用ネイティブアプリ
- [ ] **音声入力** - 発注内容を音声で登録

---

## 4. 非機能要件

### 4.1 性能要件
- **同時アクセス数**: [例: 最大100ユーザー]
- **レスポンスタイム**: 
  - 画面表示: [例: 3秒以内]
  - 検索: [例: 5秒以内（10万件のデータ）]
  - PDF生成: [例: 10秒以内]
- **データ保持期間**: [例: 発注履歴10年間保持（法定保存期間）]
- **データ量見積**: 
  - 月間発注件数: [例: 5,000件]
  - 年間発注件数: [例: 60,000件]
  - 累積発注データ: [例: 10年で60万件]

### 4.2 セキュリティ要件
- [ ] **認証**
  - ユーザー認証: [Django標準認証 / LDAP / SSO / 二段階認証]
  - サプライヤー認証: [専用ログイン、限定権限]
  
- [ ] **権限管理**
  - ロールベースアクセス制御（RBAC）
  - 部門別データ分離
  - 承認権限の金額制限
  - 監査ログ記録（誰が・いつ・何を）
  
- [ ] **データ保護**
  - 取引情報の暗号化
  - 個人情報保護法対応
  - サプライヤー情報の機密保持
  - バックアップ（日次・週次）

- [ ] **電子署名・タイムスタンプ**
  - 発注書の電子署名（電子帳簿保存法対応）
  - 改ざん検知

### 4.3 可用性要件
- **稼働時間**: [例: 平日9:00-18:00 / 24時間365日]
- **目標稼働率**: [例: 99.5%]
- **保守時間**: [例: 日曜深夜2時間]
- **障害復旧**: 
  - クリティカル障害: [4時間以内復旧]
  - 通常障害: [翌営業日中復旧]

### 4.4 法令対応
- [ ] **電子帳簿保存法** - 発注書・請求書の電子保存要件
- [ ] **下請法** - 発注書面交付義務、支払期日管理
- [ ] **会社法** - 帳簿書類の保存義務（10年間）
- [ ] **消費税法** - 適格請求書（インボイス）対応
- [ ] **個人情報保護法** - サプライヤー担当者情報管理

---

## 5. データモデル要件

### 5.1 主要エンティティ（想定）

#### 発注書（PurchaseOrder）
- [ ] 発注番号（自動採番）
- [ ] 発注日
- [ ] サプライヤー（外部キー）
- [ ] 発注者（ユーザー）
- [ ] 発注部門
- [ ] 納品先（拠点・部門）
- [ ] 希望納期
- [ ] 確定納期
- [ ] ステータス（下書き/承認待ち/承認済/発注済/入荷済/完了/キャンセル）
- [ ] 承認ステータス（未承認/承認中/承認済/差し戻し/却下）
- [ ] 合計金額（税抜）
- [ ] 消費税
- [ ] 合計金額（税込）
- [ ] 支払条件
- [ ] 備考・特記事項
- [ ] 作成日時、更新日時
- [ ] その他: ___________

#### 発注明細（PurchaseOrderItem）
- [ ] 明細ID
- [ ] 発注番号（外部キー）
- [ ] 品目（外部キー）
- [ ] 品目名（スナップショット）
- [ ] 数量
- [ ] 単位
- [ ] 単価
- [ ] 金額
- [ ] 希望納期
- [ ] 確定納期
- [ ] 入荷数量（累計）
- [ ] 未入荷数量
- [ ] 備考
- [ ] その他: ___________

#### 承認履歴（ApprovalHistory）
- [ ] 承認履歴ID
- [ ] 発注番号（外部キー）
- [ ] 承認レベル（L1: 課長 / L2: 部長 / L3: 役員）
- [ ] 承認者（ユーザー）
- [ ] 承認アクション（承認/差し戻し/却下）
- [ ] 承認日時
- [ ] コメント
- [ ] 代理承認フラグ
- [ ] 代理承認者（元の承認者）
- [ ] その他: ___________

#### サプライヤー（Supplier）
- [ ] サプライヤーID
- [ ] サプライヤーコード
- [ ] 会社名
- [ ] 会社名カナ
- [ ] 郵便番号
- [ ] 住所
- [ ] 電話番号
- [ ] FAX番号
- [ ] メールアドレス
- [ ] 担当者名
- [ ] 担当者メール
- [ ] 支払条件（末締翌月末払等）
- [ ] リードタイム（標準日数）
- [ ] 銀行口座情報
- [ ] 取引開始日
- [ ] ステータス（有効/停止/解約）
- [ ] 評価スコア
- [ ] 与信限度額
- [ ] 認定日・監査日
- [ ] その他: ___________

#### 品目（Item）
- [ ] 品目ID
- [ ] 品目コード
- [ ] 品目名
- [ ] 品目名カナ
- [ ] カテゴリ（外部キー）
- [ ] 規格・仕様
- [ ] 単位（個/箱/kg/m等）
- [ ] 標準単価
- [ ] 安全在庫数
- [ ] 発注点
- [ ] 発注ロット
- [ ] リードタイム（標準日数）
- [ ] 優先サプライヤー（外部キー）
- [ ] 画像URL
- [ ] ステータス（有効/廃番）
- [ ] その他: ___________

#### 見積（Quotation）
- [ ] 見積ID
- [ ] 見積依頼書（RFQ）番号
- [ ] 見積依頼日
- [ ] 見積回答期限
- [ ] サプライヤー（外部キー）
- [ ] 見積回答日
- [ ] 見積有効期限
- [ ] ステータス（依頼中/回答済/期限切れ/採用/不採用）
- [ ] 合計金額
- [ ] 備考
- [ ] その他: ___________

#### 見積明細（QuotationItem）
- [ ] 見積明細ID
- [ ] 見積ID（外部キー）
- [ ] 品目（外部キー）
- [ ] 数量
- [ ] 単価
- [ ] 金額
- [ ] 納期
- [ ] 備考
- [ ] その他: ___________

#### 入荷記録（ReceivingRecord）
- [ ] 入荷記録ID
- [ ] 発注番号（外部キー）
- [ ] 発注明細ID（外部キー）
- [ ] 入荷日
- [ ] 入荷数量
- [ ] 検収結果（合格/不合格）
- [ ] 不良数
- [ ] 不良理由
- [ ] 入荷担当者
- [ ] 検収担当者
- [ ] ロット番号
- [ ] 備考
- [ ] その他: ___________

#### 請求書（Invoice）
- [ ] 請求書ID
- [ ] 請求書番号（サプライヤー発番）
- [ ] サプライヤー（外部キー）
- [ ] 請求日
- [ ] 請求金額（税抜）
- [ ] 消費税
- [ ] 請求金額（税込）
- [ ] 支払期限
- [ ] 関連発注番号（複数可）
- [ ] ステータス（未確認/確認済/承認済/支払済）
- [ ] 請求書PDF URL
- [ ] 三点照合結果（一致/差異あり）
- [ ] 差異理由
- [ ] その他: ___________

#### 支払記録（Payment）
- [ ] 支払記録ID
- [ ] 請求書ID（外部キー）
- [ ] 支払予定日
- [ ] 支払実施日
- [ ] 支払金額
- [ ] 支払方法（銀行振込/手形/現金等）
- [ ] 振込手数料
- [ ] 支払承認者
- [ ] 支払ステータス（予定/承認済/送金済/完了）
- [ ] 備考
- [ ] その他: ___________

#### サプライヤー評価（SupplierEvaluation）
- [ ] 評価ID
- [ ] サプライヤー（外部キー）
- [ ] 評価年月
- [ ] 納期遵守率（%）
- [ ] 品質スコア（5段階）
- [ ] 価格競争力スコア（5段階）
- [ ] 対応力スコア（5段階）
- [ ] 総合スコア（自動計算）
- [ ] コメント
- [ ] 評価者
- [ ] その他: ___________

#### 予算（Budget）
- [ ] 予算ID
- [ ] 年度
- [ ] 部門
- [ ] カテゴリ
- [ ] 予算金額
- [ ] 消化済金額（自動計算）
- [ ] 残予算（自動計算）
- [ ] 消化率（%）
- [ ] ステータス（有効/超過）
- [ ] その他: ___________

#### 発注提案（PurchaseProposal）
- [ ] 提案ID
- [ ] 品目（外部キー）
- [ ] 提案日
- [ ] 提案理由（発注点割れ/在庫切れ予測/定期発注）
- [ ] 推奨発注数量
- [ ] 推奨サプライヤー
- [ ] 推奨単価
- [ ] 推奨納期
- [ ] ステータス（提案中/採用/却下/期限切れ）
- [ ] その他: ___________

### 5.2 追加エンティティ
必要に応じて追加してください:
- [ ] カテゴリマスタ（品目分類）
- [ ] 拠点マスタ（複数拠点管理）
- [ ] 部門マスタ
- [ ] 承認ルートマスタ（金額別・品目別）
- [ ] 支払条件マスタ
- [ ] 単位マスタ
- [ ] 通貨マスタ（多通貨対応時）
- [ ] 税率マスタ（軽減税率対応）
- [ ] 不良品記録（詳細記録）
- [ ] 契約マスタ（継続取引契約）
- [ ] 価格履歴（品目・サプライヤー別価格推移）
- [ ] その他: ___________

---

## 6. 画面要件

### 6.1 必須画面リスト（管理画面）

| 画面カテゴリ | 画面名 | 主要機能 | アクセス権限 |
|--------------|--------|----------|--------------|
| ダッシュボード | トップページ | 承認待ち件数、納期アラート、KPI | 全ユーザー |
| | 発注提案一覧 | AI/ルールベース発注提案 | 購買担当 |
| 発注管理 | 発注書一覧 | 検索・絞込、ステータス表示 | 購買担当 |
| | 発注書作成 | 品目選択、数量入力、承認申請 | 購買担当 |
| | 発注書詳細 | 履歴確認、PDF出力、メール送信 | 購買担当 |
| | 発注書編集 | 承認前のみ編集可能 | 購買担当 |
| | 発注書コピー | 過去発注からコピー作成 | 購買担当 |
| 承認管理 | 承認待ち一覧 | 自分宛の承認依頼一覧 | 承認者 |
| | 承認詳細 | 発注内容確認、承認・差し戻し | 承認者 |
| | 承認履歴 | 過去の承認記録確認 | 管理者 |
| 見積管理 | 見積依頼一覧 | RFQ一覧、ステータス管理 | 購買担当 |
| | 見積依頼作成 | 複数サプライヤー選択、送信 | 購買担当 |
| | 見積回答登録 | サプライヤーが回答入力 | サプライヤー |
| | 見積比較表 | 価格・納期・条件比較 | 購買担当 |
| サプライヤー管理 | サプライヤー一覧 | 検索・絞込、評価スコア表示 | 購買担当 |
| | サプライヤー登録・編集 | CRUD操作 | 管理者 |
| | サプライヤー詳細 | 取引履歴、評価履歴 | 購買担当 |
| | サプライヤー評価 | 納期・品質・価格評価入力 | 購買担当・管理者 |
| 納期管理 | 納期カレンダー | 月間納期一覧 | 購買担当 |
| | 納期アラート一覧 | 遅延・遅延予測リスト | 購買担当 |
| | 納期回答登録 | サプライヤーが納期確定 | サプライヤー |
| 入荷管理 | 入荷予定一覧 | 今週・来週の入荷予定 | 受領担当 |
| | 入荷実績登録 | 発注書選択、実績入力 | 受領担当 |
| | 検収処理 | 合格・不合格判定、不良品記録 | 受領担当 |
| | 入荷履歴 | 過去の入荷記録 | 受領担当 |
| 請求管理 | 請求書一覧 | 未確認・確認済・支払済 | 経理担当 |
| | 請求書登録 | 手動登録 or スキャン取込 | 経理担当 |
| | 三点照合 | 発注・納品・請求の照合 | 経理担当 |
| | 請求書承認 | 支払承認フロー | 経理責任者 |
| 支払管理 | 支払予定一覧 | 今月・来月の支払予定 | 経理担当 |
| | 支払承認 | 支払内容確認・承認 | 経理責任者 |
| | 支払データ出力 | 全銀フォーマット等 | 経理担当 |
| | 支払履歴 | 過去の支払記録 | 経理担当 |
| マスタ管理 | 品目マスタ一覧 | 検索・絞込 | 購買担当 |
| | 品目マスタ登録・編集 | CRUD操作、CSV一括登録 | 管理者 |
| | カテゴリマスタ | 品目分類管理 | 管理者 |
| | 拠点マスタ | 複数拠点の場合 | 管理者 |
| | 部門マスタ | 部門別管理 | 管理者 |
| | 承認ルート設定 | 金額別・品目別ルート | 管理者 |
| レポート | 発注実績レポート | 日次・月次・年次集計 | 管理者 |
| | サプライヤー別購買額 | 月次・年次ランキング | 管理者 |
| | 品目別購買額 | ABC分析 | 管理者 |
| | 部門別購買額 | 予算対比 | 管理者 |
| | 納期遵守率レポート | サプライヤー別分析 | 管理者 |
| | コスト削減効果 | 価格推移、削減額集計 | 管理者 |
| 設定 | ユーザー管理 | ユーザー登録、権限設定 | システム管理者 |
| | 通知設定 | メール通知のON/OFF | 全ユーザー |
| | システム設定 | 基本設定、マスタ設定 | システム管理者 |

### 6.2 必須画面リスト（サプライヤーポータル）

| 画面名 | 主要機能 | 備考 |
|--------|----------|------|
| ログイン画面 | サプライヤー専用ログイン | ID/パスワード認証 |
| ダッシュボード | 見積依頼・発注書一覧 | 未対応件数バッジ表示 |
| 見積依頼一覧 | RFQ一覧、回答期限表示 | 期限切れアラート |
| 見積回答入力 | 品目別単価・納期入力 | 自動計算 |
| 発注書一覧 | 受注した発注書一覧 | ステータス別表示 |
| 発注書詳細 | 発注内容確認、PDF DL | 納期回答登録 |
| 納期回答 | 納期確定、遅延連絡 | メール通知連動 |
| 出荷報告 | 出荷日・伝票番号登録 | 任意機能 |
| 取引履歴 | 過去の発注・支払履歴 | 参照のみ |

### 6.3 モバイル対応画面（レスポンシブ or ネイティブアプリ）

| 画面名 | 主要機能 | デバイス |
|--------|----------|----------|
| 承認待ち一覧 | 承認依頼一覧 | スマホ/タブレット |
| 承認詳細 | 発注内容確認、承認ボタン | スマホ/タブレット |
| 納期アラート | 遅延案件確認 | スマホ |
| 発注書検索 | 簡易検索・詳細確認 | スマホ/タブレット |

### 6.4 画面の優先度
- **Phase 1 (MVP)**: 
  - [発注書作成・一覧・詳細、承認ワークフロー、サプライヤーマスタ、入荷処理]
- **Phase 2**: 
  - [見積管理、請求書照合、レポート機能、サプライヤーポータル]
- **Phase 3**: 
  - [AI発注提案、高度な分析、モバイルアプリ]

---

## 7. UI/UX要件

### 7.1 デザイン方針
- [ ] シンプル・直感的（Excel操作に慣れたユーザー向け）
- [ ] レスポンシブデザイン（PC優先、タブレット・スマホ対応）
- [ ] カラースキーム: [例: 企業カラー準拠 / ブルー系・信頼感]
- [ ] アクセシビリティ対応（WCAG 2.1 AA準拠）

### 7.2 UI要素の方針
- **ナビゲーション**: [サイドバー / トップバー]
- **テーブル表示**: [ページネーション / ソート・フィルタ充実]
- **フォーム**: [インラインバリデーション、エラー明示]
- **通知**: [トースト通知 / バッジ表示]
- **承認フロー**: [ビジュアル表示（進捗バー）]

### 7.3 操作性要件
- [ ] **キーボードショートカット** - Excel慣れユーザー向け
- [ ] **CSV一括操作** - インポート/エクスポート
- [ ] **PDF自動生成** - 発注書、見積比較表等
- [ ] **Excel出力** - レポート・一覧データ
- [ ] **検索・フィルタ充実** - 多様な検索軸
- [ ] **過去データ参照** - ワンクリックで履歴表示
- [ ] **ドラフト保存** - 作成途中の一時保存

---

## 8. 外部連携要件

### 8.1 在庫管理システム連携
- [ ] **在庫数参照** - リアルタイム在庫確認
- [ ] **発注点管理** - 在庫切れアラート
- [ ] **入荷データ連携** - 入荷による在庫増加

### 8.2 会計システム連携
- [ ] **仕訳データ出力** - 発注・入荷・支払の仕訳
- [ ] **勘定科目マッピング** - 品目→勘定科目自動紐付け
- [ ] **部門別原価管理** - 部門コード連携
- [ ] **API連携** - [freee / マネーフォワード / 弥生 / 勘定奉行]

### 8.3 EDI（電子データ交換）
- [ ] **JX手順** - 日本の標準EDI
- [ ] **ebXML** - XML形式EDI
- [ ] **AS2通信** - セキュアなデータ交換

### 8.4 銀行システム連携
- [ ] **全銀フォーマット出力** - 振込データ生成
- [ ] **ファームバンキング** - 自動振込

### 8.5 メール・通知サービス
- [ ] **メール送信**: [SendGrid / AWS SES / Gmail API]
- [ ] **SMS通知**: [緊急承認依頼等]
- [ ] **Slack/Teams連携**: [承認依頼、アラート通知]

### 8.6 その他連携
- [ ] **電子契約サービス**: [発注書の電子締結]
- [ ] **電子請求書サービス**: [Peppol、デジタルインボイス]
- [ ] **OCRサービス**: [請求書スキャン自動データ化]

---

## 9. 技術要件

### 9.1 Django技術スタック
- **Djangoバージョン**: [例: Django 4.2 LTS]
- **Python バージョン**: [例: Python 3.11]
- **データベース**: [PostgreSQL / MySQL]
- **キャッシュ**: [Redis / 不要]
- **タスクキュー**: [Celery + Redis（定期レポート、通知送信）]
- **ストレージ**: [ローカル / AWS S3 / GCP Cloud Storage（PDF保存）]

### 9.2 フロントエンド
- **テンプレートエンジン**: Django Templates
- **CSSフレームワーク**: [Bootstrap 5 / Tailwind CSS]
- **JavaScript**: [Vanilla JS / Alpine.js / Vue.js]
- **テーブルライブラリ**: [DataTables / AG Grid]
- **PDF生成**: [WeasyPrint / ReportLab / wkhtmltopdf]
- **Excel生成**: [openpyxl / xlsxwriter]

### 9.3 認証・認可
- **認証方式**: [Django標準認証 / LDAP / SSO]
- **権限管理**: [Django標準Permissions + カスタムPermission]
- **承認ワークフロー**: [django-river / カスタム実装]

### 9.4 開発・運用ツール
- **バージョン管理**: Git
- **CI/CD**: [GitHub Actions / GitLab CI]
- **デプロイ先**: [AWS / GCP / Azure / オンプレミス / VPS]
- **Webサーバー**: [Nginx + Gunicorn]
- **監視**: [Sentry / Datadog / CloudWatch]

---

## 10. 制約・前提条件

### 10.1 プロジェクト制約
- **予算**: [例: 開発費○○万円、運用費月○○円]
- **納期**: [例: 6ヶ月でMVPリリース]
- **開発体制**: [例: バックエンド2名、フロント1名]
- **既存システム**: [例: 現行Excel管理、データ移行必要]

### 10.2 技術的制約
- [ ] オンプレミス環境必須（クラウド不可）
- [ ] 既存会計システムとAPI連携必須
- [ ] 既存在庫システムとデータ連携必須
- [ ] 特定ブラウザ対応必須（IE11等）
- [ ] その他: ___________

### 10.3 業務的制約
- [ ] 既存発注業務を止められない（段階的移行）
- [ ] 紙の発注書も併用期間あり
- [ ] サプライヤーのIT対応レベル低い
- [ ] 承認フローは現行踏襲必須
- [ ] その他: ___________

### 10.4 法令・規制対応
- [ ] 電子帳簿保存法対応必須
- [ ] 下請法対応（発注書面交付、支払期日）
- [ ] インボイス制度対応（適格請求書）
- [ ] その他: ___________

---

## 11. リスクと対応策

| リスク | 影響度 | 発生確率 | 対応策 |
|--------|--------|----------|--------|
| [例: 承認者不在時の業務停止] | 高 | 中 | 代理承認機能実装 |
| [例: サプライヤーのシステム対応困難] | 中 | 高 | 紙・メール併用可能に |
| [例: 既存データ移行失敗] | 高 | 中 | 段階的移行、検証期間設定 |
| [例: PDF生成の遅延] | 中 | 中 | 非同期処理（Celery）、キャッシュ |
| [例: 承認フロー変更要望多発] | 中 | 高 | 柔軟な設定機能、カスタマイズ容易に |
| | | | |

---

## 12. 成功基準（KPI）

### 12.1 定量的指標
- [ ] **発注処理時間**: [現状○分 → 目標○分（50%削減）]
- [ ] **承認リードタイム**: [現状○日 → 目標○時間]
- [ ] **発注ミス件数**: [現状月○件 → 目標ゼロ]
- [ ] **ペーパーレス率**: [目標90%以上]
- [ ] **サプライヤーポータル利用率**: [目標80%以上]
- [ ] **納期遵守率**: [目標95%以上]
- [ ] **システム稼働率**: [目標99.5%]

### 12.2 定性的指標
- [ ] 購買担当の業務負担軽減
- [ ] 承認者の場所・時間に縛られない承認
- [ ] 発注履歴の可視化・分析可能
- [ ] サプライヤー評価の客観化
- [ ] コンプライアンス強化（法令対応）

---

## 13. 移行計画

### 13.1 データ移行
- **移行対象データ**: 
  - [品目マスタ: ○件]
  - [サプライヤーマスタ: ○件]
  - [過去発注履歴: 直近○年分]
- **移行方法**: [CSV一括登録 / API連携 / 手動入力]
- **移行タイミング**: [本番稼働前月]
- **検証方法**: [件数照合、サンプルデータ確認]

### 13.2 段階的移行計画
```
Phase 1: パイロット運用（2ヶ月）
  - 特定部門（購買部）のみで試験運用
  - 紙の発注書と併用
  - 問題点洗い出し・改善

Phase 2: 部分展開（2ヶ月）
  - 全部門に展開
  - 発注書作成・承認をシステム化
  - 入荷・請求は従来通り

Phase 3: 全面移行（2ヶ月）
  - 入荷・検収・請求・支払もシステム化
  - サプライヤーポータル公開
  - 紙廃止（一部例外除く）
```

### 13.3 教育訓練
- **購買担当向け**: [システム操作研修3時間×2回]
- **承認者向け**: [承認操作研修1時間、スマホ操作含む]
- **受領担当向け**: [入荷・検収操作研修2時間]
- **経理担当向け**: [請求・支払操作研修2時間]
- **サプライヤー向け**: [ポータル利用説明会、動画マニュアル配布]
- **マニュアル**: [画面別操作マニュアル、FAQ、動画]

---

## 14. 承認ワークフロー詳細要件

### 14.1 承認ルート設定
| 条件 | 承認ルート | 例 |
|------|------------|-----|
| 金額: 10万円未満 | 課長承認のみ | 消耗品発注 |
| 金額: 10万円以上50万円未満 | 課長→部長承認 | 設備部品発注 |
| 金額: 50万円以上500万円未満 | 課長→部長→役員承認 | 高額設備発注 |
| 金額: 500万円以上 | 課長→部長→役員→社長承認 | 超高額設備発注 |
| 品目: 危険物 | 安全管理者承認必須 | 化学薬品発注 |
| 品目: IT機器 | 情報システム部承認必須 | PC・サーバー発注 |

### 14.2 承認アクション
- [ ] **承認** - 次の承認者へ、最終承認者は発注確定
- [ ] **差し戻し** - 申請者へ戻す（修正後再申請）
- [ ] **却下** - 発注中止
- [ ] **保留** - 一時保留（追加情報待ち等）
- [ ] **代理承認** - 本人不在時に代理者が承認

### 14.3 承認通知
- [ ] 承認依頼メール（即時送信）
- [ ] 承認依頼リマインド（24時間後、48時間後）
- [ ] 承認完了通知（申請者へ）
- [ ] 差し戻し通知（申請者へ）
- [ ] モバイルプッシュ通知（アプリ利用時）

---

## 15. 次のステップ

このテンプレートを埋めた後、以下の順序で設計を進めます:

### Step 1: 要件確認・曖昧性解消
- 記載内容の矛盾チェック
- 発注業務フローの詳細化
- 承認ルートの確定
- 優先機能の確定

### Step 2: データモデル設計（models.py）
- ER図作成
- Djangoモデル定義
- リレーションシップ確定
- 承認ワークフロー設計

### Step 3: 機能設計
- URLルーティング設計
- ビュー設計（CBV）
- フォーム設計
- 承認ワークフロー実装方針

### Step 4: UI設計書作成
- ワイヤーフレーム
- 画面レイアウト詳細
- 承認フローのUI/UX設計

### Step 5: 外部連携設計
- 会計システムAPI仕様確認
- 在庫システム連携方式決定
- EDI対応範囲確定

---

## 記入ガイド

### 🔴 必須項目（絶対に明確化すべき）
- 発注規模（月間件数、サプライヤー数）
- 発注管理の範囲（どこまでカバーするか）
- 主要ユーザーロール
- 承認ワークフロー（金額別・品目別ルート）
- 必須機能（MVP）
- 法令対応要件

### 🟡 重要項目（早期に決定すべき）
- 外部連携要件（会計・在庫システム）
- サプライヤーポータル要否
- PDF生成要件
- 非機能要件（性能・セキュリティ）
- データ移行範囲

### 🟢 推奨項目（設計品質向上）
- 業務フロー詳細化
- AI発注提案要否
- EDI対応要否
- リスクと対応策
- 段階的移行計画

---

## 発注管理システム特有のチェックリスト

### ✅ 承認ワークフローを考慮しているか
- [ ] 金額別承認ルート
- [ ] 品目別承認ルート
- [ ] 代理承認機能
- [ ] 承認通知・リマインド
- [ ] 承認履歴の記録

### ✅ 法令対応を考慮しているか
- [ ] 電子帳簿保存法（発注書の電子保存）
- [ ] 下請法（発注書面交付、支払期日）
- [ ] インボイス制度（適格請求書）
- [ ] 会社法（帳簿保存義務10年）

### ✅ サプライヤー管理を考慮しているか
- [ ] サプライヤー評価・レーティング
- [ ] 見積比較機能
- [ ] 取引履歴の可視化
- [ ] サプライヤーポータル

### ✅ 外部システム連携を考慮しているか
- [ ] 会計システム連携
- [ ] 在庫管理システム連携
- [ ] 銀行システム連携（支払）
- [ ] EDI対応

---

## テンプレート使用方法

1. **このファイルをコピー**して、プロジェクト固有の要件を記入
2. **不明な項目は「TODO」**と記載し、後で確認
3. **該当しない項目は「N/A」**と記載
4. 記入後、**AIに要件確認を依頼**:
   - 「この発注管理システム要件定義を確認し、曖昧な点・矛盾を指摘してください」
   - 「この要件に基づいてDjangoモデル設計を開始してください」
   - 「承認ワークフローの実装方式を提案してください」
   - 「会計システムとの連携仕様を設計してください」

---

**作成日**: 2025-12-08
**バージョン**: 1.0
**作成者**: [記入してください]
**想定システム**: 発注管理・購買管理・調達管理・サプライヤー管理
