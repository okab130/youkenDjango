# Djangoベース在庫管理システム 要件定義テンプレート

## 1. プロジェクト基本情報

### 1.1 プロジェクト概要
- **システム名称**: [例: StockFlow - 統合在庫管理システム]
- **目的**: [例: リアルタイム在庫可視化、適正在庫維持、欠品防止、過剰在庫削減]
- **対象業種**: [例: 製造業 / 卸売業 / 小売業 / EC事業 / 物流業]
- **企業規模**: [例: 中小企業 / 中堅企業 / 大企業]
- **在庫規模**: 
  - 管理品目数: [例: ○品目]
  - 管理倉庫数: [例: ○拠点]
  - 月間入出庫件数: [例: ○件]
  - 総在庫金額: [例: ○億円]
- **想定ユーザー数**: [例: 倉庫担当10名、営業20名、購買5名、管理者3名]
- **開発フェーズ**: [プロトタイプ / MVP / 本番環境]

### 1.2 在庫管理システムの範囲定義（該当するものに✓）

#### A. 基本在庫管理
- [ ] **在庫照会**
  - [ ] リアルタイム在庫数表示
  - [ ] 倉庫別在庫数
  - [ ] ロケーション別在庫数
  - [ ] 有効在庫数（在庫 - 引当数）
  - [ ] 品目別在庫一覧
  - [ ] 在庫推移グラフ

- [ ] **入庫管理**
  - [ ] 入庫予定登録
  - [ ] 入庫実績登録
  - [ ] 検収処理（数量・品質確認）
  - [ ] ロケーション割り当て
  - [ ] ロット番号・シリアル番号登録
  - [ ] 入庫伝票発行

- [ ] **出庫管理**
  - [ ] 出庫指示登録
  - [ ] ピッキングリスト出力
  - [ ] 出庫実績登録
  - [ ] 引当処理
  - [ ] 出庫伝票発行
  - [ ] 出荷検品

#### B. ロケーション管理
- [ ] **倉庫管理**
  - [ ] 倉庫マスタ（複数拠点対応）
  - [ ] エリア管理（常温・冷蔵・冷凍等）
  - [ ] ロケーション管理（棚番・段・列）
  - [ ] ロケーション別在庫表示
  - [ ] ロケーション移動

- [ ] **保管条件管理**
  - [ ] 温度管理（温度記録、アラート）
  - [ ] 湿度管理
  - [ ] 賞味期限・消費期限管理
  - [ ] 先入先出（FIFO）管理
  - [ ] 危険物管理

#### C. ロット・トレーサビリティ管理
- [ ] **ロット管理**
  - [ ] ロット番号管理
  - [ ] 製造日・有効期限管理
  - [ ] ロット別在庫照会
  - [ ] ロットトレース（追跡・遡及）
  - [ ] ロット別出庫指示

- [ ] **シリアル番号管理**
  - [ ] シリアル番号登録
  - [ ] シリアル番号追跡
  - [ ] 個体管理（家電・精密機器等）

#### D. 在庫調整・棚卸
- [ ] **在庫調整**
  - [ ] 在庫数調整（増減処理）
  - [ ] 理由コード管理（破損・紛失等）
  - [ ] 調整承認ワークフロー
  - [ ] 調整履歴記録

- [ ] **棚卸**
  - [ ] 棚卸計画作成
  - [ ] 棚卸リスト出力
  - [ ] 棚卸実績入力（ハンディターミナル対応）
  - [ ] 差異分析
  - [ ] 棚卸承認・確定処理

#### E. 発注・補充管理
- [ ] **発注点管理**
  - [ ] 安全在庫設定
  - [ ] 発注点設定
  - [ ] 発注ロット設定
  - [ ] 発注点割れアラート

- [ ] **自動発注提案**
  - [ ] 需要予測（過去実績ベース）
  - [ ] 発注提案自動生成
  - [ ] リードタイム考慮
  - [ ] 季節変動考慮

#### F. 引当管理
- [ ] **受注引当**
  - [ ] 受注時在庫引当
  - [ ] 引当優先順位設定（先入先出等）
  - [ ] 引当解除（受注キャンセル時）
  - [ ] 仮引当（見積段階）

- [ ] **製造引当**
  - [ ] 製造指示時の部材引当
  - [ ] BOM（部品表）展開引当
  - [ ] 引当不足アラート

#### G. 在庫分析・最適化
- [ ] **ABC分析**
  - [ ] 売上金額ベースABC分類
  - [ ] 出庫頻度ベースABC分類
  - [ ] クラス別管理方針設定

- [ ] **在庫分析**
  - [ ] 在庫回転率分析
  - [ ] 滞留在庫分析
  - [ ] 欠品分析
  - [ ] 過剰在庫分析
  - [ ] デッドストック検出

- [ ] **在庫最適化**
  - [ ] 適正在庫数算出
  - [ ] 在庫削減シミュレーション
  - [ ] 発注量最適化（EOQ）

#### H. 実地棚卸・循環棚卸
- [ ] **実地棚卸**
  - [ ] 全品一斉棚卸
  - [ ] 棚卸日の在庫凍結
  - [ ] 棚卸差異報告書

- [ ] **循環棚卸（サイクルカウント）**
  - [ ] ABC分類別棚卸頻度設定
  - [ ] 日次部分棚卸
  - [ ] 棚卸計画自動生成

#### I. バーコード・RFID管理
- [ ] **バーコード管理**
  - [ ] バーコードラベル発行
  - [ ] バーコードスキャン入出庫
  - [ ] ハンディターミナル連携

- [ ] **RFID管理**
  - [ ] RFIDタグ登録
  - [ ] RFID一括読取
  - [ ] リアルタイム在庫更新

#### J. レポート・帳票
- [ ] **在庫レポート**
  - [ ] 在庫一覧表
  - [ ] 在庫推移表
  - [ ] 倉庫別在庫表
  - [ ] ロット別在庫表
  - [ ] 賞味期限一覧

- [ ] **入出庫レポート**
  - [ ] 入庫実績表
  - [ ] 出庫実績表
  - [ ] 入出庫履歴
  - [ ] ピッキングリスト

---

## 2. ビジネス要件

### 2.1 解決したい課題（優先度: 高/中/低）
| 課題 | 現状 | 理想 | 優先度 |
|------|------|------|--------|
| [例: 在庫数の不正確性] | [Excel管理、誤差○%] | [リアルタイム管理、誤差0.1%以下] | 高 |
| [例: 欠品の頻発] | [月○回欠品、機会損失] | [発注点管理で欠品防止] | 高 |
| [例: 過剰在庫] | [総在庫金額○億円、回転率○回] | [適正在庫、回転率○回に改善] | 高 |
| [例: 賞味期限切れ廃棄] | [月○万円の廃棄損] | [先入先出徹底、廃棄○%削減] | 中 |
| [例: 棚卸作業の長時間化] | [棚卸に○日、業務停止] | [循環棚卸で業務継続] | 中 |
| [例: 在庫場所不明] | [探すのに○分、非効率] | [ロケーション管理で即座に特定] | 中 |
| | | | |

### 2.2 主要ユーザーロール
| ロール名 | 主な業務 | 権限レベル | 人数 | 利用デバイス |
|----------|----------|------------|------|--------------|
| [例: 倉庫担当] | [入出庫処理、棚卸] | [在庫操作] | [10名] | [PC/ハンディ] |
| [例: 倉庫責任者] | [在庫承認、棚卸承認] | [承認権限] | [2名] | [PC/タブレット] |
| [例: 購買担当] | [発注提案確認、在庫照会] | [参照・発注] | [5名] | [PC] |
| [例: 営業担当] | [在庫照会、引当確認] | [参照のみ] | [20名] | [PC/スマホ] |
| [例: 管理者] | [在庫分析、レポート確認] | [全権限] | [3名] | [PC] |
| | | | | |

### 2.3 業務フロー（代表的なもの）

#### フロー1: 通常入庫業務フロー
```
1. 発注書に基づく入庫予定登録
2. 納品物到着
3. 検収処理（数量・品質確認）
4. ロット番号・製造日登録
5. ロケーション割り当て
6. 入庫実績登録
7. 在庫数自動更新
8. 入庫伝票発行
9. 発注書との照合
```

#### フロー2: 通常出庫業務フロー
```
1. 受注時に在庫引当
2. 出庫指示登録
3. ピッキングリスト出力
4. 倉庫担当がピッキング
5. 出庫検品（数量・品番確認）
6. 出庫実績登録
7. 在庫数・引当数自動更新
8. 出庫伝票発行
9. 出荷部門へ引き渡し
```

#### フロー3: 棚卸業務フロー（実地棚卸）
```
1. 棚卸計画作成（対象品目・日程）
2. 棚卸リスト出力
3. 在庫凍結（入出庫停止）
4. 棚卸実施（実在庫カウント）
5. 棚卸実績入力
6. 帳簿在庫との差異分析
7. 差異原因調査
8. 在庫調整処理
9. 棚卸承認・確定
10. 在庫凍結解除
```

#### フロー4: 循環棚卸業務フロー（サイクルカウント）
```
1. システムが自動で本日の棚卸対象品目抽出
2. 棚卸リスト出力
3. 対象品目のみカウント（業務は継続）
4. 棚卸実績入力
5. 差異があれば即時調整
6. 承認・確定
```

#### フロー5: ロット追跡フロー（トレーサビリティ）
```
【フォワードトレース（追跡）】
1. ロット番号指定
2. 入庫日・入庫元確認
3. 出庫先一覧表示
4. 最終顧客まで追跡

【バックワードトレース（遡及）】
1. 問題発生（不良品発見）
2. ロット番号特定
3. 同ロット在庫確認
4. 出荷済同ロットリスト出力
5. リコール対応
```

#### フロー6: 発注点管理フロー
```
1. システムが在庫を常時監視
2. 発注点割れ検知
3. 発注提案自動生成
4. 購買担当に通知
5. 発注提案確認・承認
6. 発注書作成
7. 発注
8. 入庫予定登録
```

**記載してください:**
- [ ] 通常入庫フロー
- [ ] 通常出庫フロー
- [ ] 棚卸フロー
- [ ] ロット追跡フロー
- [ ] 発注点管理フロー
- [ ] 在庫調整フロー
- [ ] 返品処理フロー
- [ ] その他重要フロー

---

## 3. 機能要件

### 3.1 必須機能（MVP）
| 機能カテゴリ | 機能名 | 詳細 | 優先度 |
|--------------|--------|------|--------|
| 在庫照会 | 在庫一覧 | 品目別在庫数、検索・絞込 | 必須 |
| | 在庫詳細 | 倉庫別・ロケーション別在庫 | 必須 |
| | 在庫推移グラフ | 日次・週次・月次推移 | 高 |
| 入庫管理 | 入庫予定登録 | 発注書連動、手動登録 | 必須 |
| | 入庫実績登録 | 数量・ロット番号入力 | 必須 |
| | 検収処理 | 合格・不合格判定 | 必須 |
| 出庫管理 | 出庫指示登録 | 受注連動、手動登録 | 必須 |
| | ピッキングリスト出力 | PDF出力、バーコード表示 | 必須 |
| | 出庫実績登録 | 数量・ロット番号入力 | 必須 |
| 引当管理 | 在庫引当 | 受注時自動引当 | 必須 |
| | 引当解除 | 受注キャンセル時 | 必須 |
| | 有効在庫計算 | 在庫 - 引当数 | 必須 |
| ロケーション管理 | ロケーションマスタ | 倉庫・エリア・棚番管理 | 必須 |
| | ロケーション別在庫 | 棚番レベルの在庫表示 | 高 |
| | ロケーション移動 | 在庫移動処理 | 高 |
| ロット管理 | ロット番号登録 | 入庫時登録 | 高 |
| | ロット別在庫照会 | ロット単位の在庫確認 | 高 |
| | ロットトレース | 追跡・遡及機能 | 高 |
| 在庫調整 | 在庫調整入力 | 増減処理、理由コード | 必須 |
| | 調整承認 | 承認ワークフロー | 高 |
| 棚卸 | 棚卸リスト出力 | PDF/CSV出力 | 必須 |
| | 棚卸実績入力 | 実在庫数入力 | 必須 |
| | 差異分析 | 帳簿在庫との比較 | 必須 |
| 発注点管理 | 発注点設定 | 品目別発注点・安全在庫 | 高 |
| | 発注提案 | 発注点割れ自動検知 | 高 |
| マスタ管理 | 品目マスタ | 品番・品名・単位等 | 必須 |
| | 倉庫マスタ | 倉庫情報管理 | 必須 |
| | サプライヤーマスタ | 仕入先情報 | 高 |
| レポート | 在庫一覧表 | PDF/Excel出力 | 必須 |
| | 入出庫履歴 | 期間指定、CSV出力 | 高 |
| | 在庫推移表 | 月次推移レポート | 高 |

**追加機能を記載:**
| | | | |

### 3.2 将来対応機能（Phase 2以降）
- [ ] **AI需要予測** - 機械学習による需要予測、最適発注量提案
- [ ] **IoT連携** - 温湿度センサー、重量センサーリアルタイム監視
- [ ] **RFID対応** - 一括読取、リアルタイム在庫更新
- [ ] **画像認識** - AIによる品質検査、外観不良検出
- [ ] **自動倉庫連携** - AGV、自動ピッキングシステム連携
- [ ] **ブロックチェーン証跡** - トレーサビリティ強化
- [ ] **音声ピッキング** - ハンズフリー作業
- [ ] **ドローン棚卸** - ドローンによる自動棚卸
- [ ] **多通貨対応** - 海外拠点在庫管理
- [ ] **多言語対応** - グローバル展開

---

## 4. 非機能要件

### 4.1 性能要件
- **同時アクセス数**: [例: 最大100ユーザー（倉庫作業ピーク時）]
- **レスポンスタイム**: 
  - 在庫照会: [例: 3秒以内]
  - 入出庫登録: [例: 5秒以内]
  - 在庫一覧表示: [例: 10秒以内（10万品目）]
- **データ保持期間**: [例: 在庫履歴5年間保持]
- **データ量見積**: 
  - 管理品目数: [例: 100,000品目]
  - 月間入出庫件数: [例: 50,000件]
  - 年間トランザクション: [例: 600,000件]

### 4.2 セキュリティ要件
- [ ] **認証**
  - ユーザー認証: [Django標準認証 / LDAP / SSO]
  - ハンディターミナル認証: [PIN / 生体認証]
  
- [ ] **権限管理**
  - ロールベースアクセス制御（RBAC）
  - 倉庫別データ分離
  - 在庫調整承認権限管理
  - 操作ログ記録（誰が・いつ・何を）
  
- [ ] **データ保護**
  - 在庫データの暗号化
  - バックアップ（日次）
  - 在庫数の改ざん検知

### 4.3 可用性要件
- **稼働時間**: [例: 24時間365日（倉庫は休みなし）]
- **目標稼働率**: [例: 99.5%]
- **保守時間**: [例: 月1回、日曜深夜2時間]
- **障害復旧**: 
  - クリティカル障害: [2時間以内復旧]
  - 通常障害: [4時間以内復旧]

### 4.4 データ整合性要件
- [ ] **在庫数の正確性** - 誤差0.1%以内
- [ ] **トランザクション整合性** - 入出庫の原子性保証
- [ ] **引当数の整合性** - 在庫≧引当数の制約
- [ ] **ロット追跡完全性** - ロット情報の欠損なし

---

## 5. データモデル要件

### 5.1 主要エンティティ（想定）

#### 品目（Product）
- [ ] 品目ID
- [ ] 品目コード（品番）
- [ ] 品目名
- [ ] 品目名カナ
- [ ] カテゴリ（外部キー）
- [ ] 規格・仕様
- [ ] 単位（個/箱/kg/m等）
- [ ] 標準単価
- [ ] 安全在庫数
- [ ] 発注点
- [ ] 発注ロット
- [ ] リードタイム（日数）
- [ ] ロット管理フラグ
- [ ] シリアル番号管理フラグ
- [ ] 温度管理区分（常温/冷蔵/冷凍）
- [ ] 賞味期限管理フラグ
- [ ] 画像URL
- [ ] JANコード
- [ ] ステータス（有効/廃番）
- [ ] その他: ___________

#### 在庫（Inventory）
- [ ] 在庫ID
- [ ] 品目（外部キー）
- [ ] 倉庫（外部キー）
- [ ] ロケーション（外部キー）
- [ ] ロット番号（任意）
- [ ] シリアル番号（任意）
- [ ] 在庫数
- [ ] 引当済数
- [ ] 有効在庫数（計算項目: 在庫数 - 引当済数）
- [ ] 製造日
- [ ] 有効期限・賞味期限
- [ ] 入庫日
- [ ] 最終更新日時
- [ ] その他: ___________

#### 倉庫（Warehouse）
- [ ] 倉庫ID
- [ ] 倉庫コード
- [ ] 倉庫名
- [ ] 郵便番号
- [ ] 住所
- [ ] 電話番号
- [ ] 倉庫種別（自社倉庫/外部倉庫/3PL）
- [ ] 温度管理区分（常温/冷蔵/冷凍/複合）
- [ ] ステータス（有効/無効）
- [ ] その他: ___________

#### ロケーション（Location）
- [ ] ロケーションID
- [ ] 倉庫（外部キー）
- [ ] エリアコード（A/B/C等）
- [ ] 棚番（01/02/03等）
- [ ] 段（1/2/3等）
- [ ] 列（1/2/3等）
- [ ] ロケーションコード（例: A-01-2-3）
- [ ] 保管条件（常温/冷蔵/冷凍）
- [ ] 最大保管数
- [ ] ステータス（使用中/空き/メンテナンス中）
- [ ] その他: ___________

#### 入庫記録（ReceivingRecord）
- [ ] 入庫記録ID
- [ ] 入庫番号（自動採番）
- [ ] 入庫日
- [ ] 品目（外部キー）
- [ ] 倉庫（外部キー）
- [ ] ロケーション（外部キー）
- [ ] ロット番号
- [ ] シリアル番号（複数可）
- [ ] 入庫数量
- [ ] 単位
- [ ] 製造日
- [ ] 有効期限
- [ ] 発注書（外部キー、任意）
- [ ] サプライヤー（外部キー）
- [ ] 検収結果（合格/不合格）
- [ ] 不良数
- [ ] 不良理由
- [ ] 入庫担当者
- [ ] 入庫種別（仕入/返品受入/移動受入/調整増）
- [ ] 備考
- [ ] その他: ___________

#### 出庫記録（ShippingRecord）
- [ ] 出庫記録ID
- [ ] 出庫番号（自動採番）
- [ ] 出庫日
- [ ] 品目（外部キー）
- [ ] 倉庫（外部キー）
- [ ] ロケーション（外部キー）
- [ ] ロット番号
- [ ] シリアル番号（複数可）
- [ ] 出庫数量
- [ ] 単位
- [ ] 受注書（外部キー、任意）
- [ ] 出庫先（顧客、外部キー）
- [ ] 出庫担当者
- [ ] 出庫種別（出荷/返品出庫/移動出庫/調整減）
- [ ] ピッキング済フラグ
- [ ] 検品済フラグ
- [ ] 備考
- [ ] その他: ___________

#### 引当（Allocation）
- [ ] 引当ID
- [ ] 受注（外部キー）
- [ ] 品目（外部キー）
- [ ] 倉庫（外部キー）
- [ ] ロット番号（任意）
- [ ] 引当数量
- [ ] 引当日時
- [ ] 引当ステータス（仮引当/確定引当/引当解除/出庫済）
- [ ] 引当優先順位
- [ ] その他: ___________

#### 棚卸（StockTaking）
- [ ] 棚卸ID
- [ ] 棚卸番号
- [ ] 棚卸日
- [ ] 棚卸種別（実地棚卸/循環棚卸）
- [ ] 倉庫（外部キー）
- [ ] 対象品目（全品 or 一部）
- [ ] ステータス（計画中/実施中/完了/承認済）
- [ ] 承認者
- [ ] 承認日
- [ ] その他: ___________

#### 棚卸明細（StockTakingItem）
- [ ] 棚卸明細ID
- [ ] 棚卸（外部キー）
- [ ] 品目（外部キー）
- [ ] ロケーション（外部キー）
- [ ] ロット番号（任意）
- [ ] 帳簿在庫数
- [ ] 実在庫数
- [ ] 差異数（実在庫 - 帳簿在庫）
- [ ] 差異金額
- [ ] 差異理由
- [ ] 棚卸担当者
- [ ] その他: ___________

#### 在庫調整（InventoryAdjustment）
- [ ] 調整ID
- [ ] 調整日
- [ ] 品目（外部キー）
- [ ] 倉庫（外部キー）
- [ ] ロケーション（外部キー）
- [ ] ロット番号（任意）
- [ ] 調整数量（+ or -）
- [ ] 調整前在庫数
- [ ] 調整後在庫数
- [ ] 調整理由コード（破損/紛失/棚卸差異等）
- [ ] 調整理由詳細
- [ ] 調整担当者
- [ ] 承認者
- [ ] 承認日
- [ ] ステータス（未承認/承認済/却下）
- [ ] その他: ___________

#### 在庫移動（InventoryTransfer）
- [ ] 移動ID
- [ ] 移動日
- [ ] 品目（外部キー）
- [ ] 移動元倉庫（外部キー）
- [ ] 移動元ロケーション（外部キー）
- [ ] 移動先倉庫（外部キー）
- [ ] 移動先ロケーション（外部キー）
- [ ] ロット番号（任意）
- [ ] 移動数量
- [ ] 移動理由
- [ ] 移動担当者
- [ ] ステータス（指示/移動中/完了）
- [ ] その他: ___________

### 5.2 追加エンティティ
必要に応じて追加してください:
- [ ] カテゴリマスタ（品目分類）
- [ ] 単位マスタ
- [ ] 理由コードマスタ（調整理由）
- [ ] 温度記録（温度管理倉庫）
- [ ] 発注提案（自動生成）
- [ ] 在庫アラート（発注点割れ、賞味期限接近等）
- [ ] BOM（部品表）- 製造業の場合
- [ ] セット品構成（セット商品）
- [ ] その他: ___________

---

## 6. 画面要件

### 6.1 必須画面リスト（管理画面 - PC）

| 画面カテゴリ | 画面名 | 主要機能 | アクセス権限 |
|--------------|--------|----------|--------------|
| ダッシュボード | トップページ | 在庫サマリ、アラート一覧、KPI | 全ユーザー |
| | 在庫状況グラフ | 在庫推移、回転率、カテゴリ別 | 管理者 |
| 在庫照会 | 在庫一覧 | 品目別在庫、検索・絞込 | 全ユーザー |
| | 在庫詳細 | 倉庫・ロケーション・ロット別 | 全ユーザー |
| | 有効在庫照会 | 在庫 - 引当数表示 | 全ユーザー |
| | 在庫推移グラフ | 日次・週次・月次推移 | 管理者 |
| | ロット別在庫 | ロット単位の在庫確認 | 倉庫担当 |
| 入庫管理 | 入庫予定一覧 | 今週・来週の入庫予定 | 倉庫担当 |
| | 入庫予定登録 | 発注書連動、手動登録 | 倉庫担当 |
| | 入庫実績登録 | 数量・ロット・ロケーション入力 | 倉庫担当 |
| | 検収処理 | 合格・不合格判定、不良記録 | 倉庫担当 |
| | 入庫履歴 | 過去の入庫記録 | 倉庫担当 |
| 出庫管理 | 出庫指示一覧 | 未出庫・出庫済一覧 | 倉庫担当 |
| | 出庫指示登録 | 受注連動、手動登録 | 倉庫担当 |
| | ピッキングリスト | PDF出力、バーコード表示 | 倉庫担当 |
| | 出庫実績登録 | 数量・ロット入力 | 倉庫担当 |
| | 出庫履歴 | 過去の出庫記録 | 倉庫担当 |
| 引当管理 | 引当一覧 | 受注別引当状況 | 営業・倉庫 |
| | 引当登録 | 手動引当 | 倉庫担当 |
| | 引当解除 | 受注キャンセル時 | 倉庫担当 |
| ロケーション管理 | ロケーションマップ | 倉庫レイアウト、在庫配置 | 倉庫担当 |
| | ロケーション別在庫 | 棚番レベルの在庫 | 倉庫担当 |
| | ロケーション移動 | 在庫移動処理 | 倉庫担当 |
| 棚卸 | 棚卸計画一覧 | 計画・実施中・完了 | 倉庫責任者 |
| | 棚卸計画作成 | 対象品目・日程設定 | 倉庫責任者 |
| | 棚卸リスト出力 | PDF/CSV出力 | 倉庫担当 |
| | 棚卸実績入力 | 実在庫数入力 | 倉庫担当 |
| | 差異分析 | 差異一覧、差異理由 | 倉庫責任者 |
| | 棚卸承認 | 承認・確定処理 | 倉庫責任者 |
| 在庫調整 | 在庫調整一覧 | 未承認・承認済一覧 | 倉庫担当 |
| | 在庫調整入力 | 増減処理、理由入力 | 倉庫担当 |
| | 在庫調整承認 | 承認・却下 | 倉庫責任者 |
| 発注点管理 | 発注点設定 | 品目別安全在庫・発注点 | 購買担当 |
| | 発注提案一覧 | 発注点割れ品目 | 購買担当 |
| | 発注提案承認 | 発注書作成へ連携 | 購買担当 |
| 在庫分析 | ABC分析 | 売上・出庫頻度別分類 | 管理者 |
| | 在庫回転率分析 | 品目別回転率 | 管理者 |
| | 滞留在庫分析 | 長期在庫リスト | 管理者 |
| | 欠品分析 | 欠品発生履歴 | 管理者 |
| | 賞味期限一覧 | 期限接近品リスト | 倉庫担当 |
| マスタ管理 | 品目マスタ一覧 | 検索・絞込 | 倉庫担当 |
| | 品目マスタ登録・編集 | CRUD操作、CSV一括 | 管理者 |
| | 倉庫マスタ | CRUD操作 | 管理者 |
| | ロケーションマスタ | CRUD操作 | 倉庫責任者 |
| | カテゴリマスタ | CRUD操作 | 管理者 |
| レポート | 在庫一覧表 | PDF/Excel出力 | 全ユーザー |
| | 入出庫実績表 | 期間指定、CSV出力 | 管理者 |
| | 在庫推移表 | 月次推移レポート | 管理者 |
| | 棚卸報告書 | 差異分析レポート | 倉庫責任者 |

### 6.2 必須画面リスト（ハンディターミナル・モバイル）

| 画面名 | 主要機能 | デバイス |
|--------|----------|----------|
| ログイン | PIN/生体認証 | ハンディ/スマホ |
| メニュー | 入庫/出庫/棚卸選択 | ハンディ/スマホ |
| 入庫スキャン | バーコードスキャン、数量入力 | ハンディ |
| 出庫スキャン | ピッキングリスト表示、スキャン | ハンディ |
| ロケーション確認 | 棚番表示、ナビゲーション | ハンディ |
| 棚卸スキャン | 品目スキャン、実在庫入力 | ハンディ |
| 在庫照会（簡易） | 品目スキャン、在庫数表示 | ハンディ/スマホ |

### 6.3 画面の優先度
- **Phase 1 (MVP)**: 
  - [在庫照会、入出庫登録、品目マスタ、倉庫マスタ、在庫一覧表]
- **Phase 2**: 
  - [引当管理、ロケーション管理、棚卸、在庫調整、ハンディ対応]
- **Phase 3**: 
  - [発注点管理、在庫分析、ABC分析、AI需要予測]

---

## 7. UI/UX要件

### 7.1 管理画面デザイン方針（PC）
- [ ] シンプル・直感的（倉庫作業者でも迷わない）
- [ ] レスポンシブデザイン（PC優先、タブレット対応）
- [ ] カラースキーム: [例: 在庫あり=緑、少量=黄、欠品=赤]
- [ ] 数字の視認性重視（大きなフォント、桁区切り）

### 7.2 ハンディターミナルUI方針
- [ ] **大きなボタン** - タッチしやすい
- [ ] **最小限の入力** - スキャン中心、手入力最小化
- [ ] **音声フィードバック** - スキャン成功・エラー音
- [ ] **画面遷移最小化** - 同一画面で作業完結
- [ ] **オフライン対応** - Wi-Fi切れても動作

### 7.3 操作性要件
- [ ] **バーコードスキャン** - ピッ音でフィードバック
- [ ] **キーボードショートカット** - 高速入力
- [ ] **CSV一括操作** - インポート/エクスポート
- [ ] **ドリルダウン** - 在庫一覧→詳細→入出庫履歴
- [ ] **検索機能充実** - 品番・品名・ロット番号等

---

## 8. 外部連携要件

### 8.1 販売管理システム連携
- [ ] **受注データ取込** - 自動引当処理
- [ ] **出庫データ連携** - 出荷実績反映

### 8.2 購買・発注管理システム連携
- [ ] **発注データ取込** - 入庫予定自動登録
- [ ] **入庫データ連携** - 発注残更新

### 8.3 財務会計システム連携
- [ ] **在庫金額データ提供** - 棚卸資産計上
- [ ] **在庫評価額算出** - 移動平均法等

### 8.4 製造管理システム連携（製造業の場合）
- [ ] **製造指示連携** - 部材引当
- [ ] **製造完了連携** - 完成品入庫

### 8.5 WMS（倉庫管理システム）連携
- [ ] **ピッキングリスト連携** - 自動倉庫へ指示
- [ ] **入出庫実績取込** - 自動倉庫からの実績

### 8.6 ハンディターミナル連携
- [ ] **バーコードスキャナー** - USB/Bluetooth接続
- [ ] **RFIDリーダー** - 一括読取
- [ ] **Wi-Fi/LTE通信** - リアルタイムデータ同期

---

## 9. 技術要件

### 9.1 Django技術スタック
- **Djangoバージョン**: [例: Django 4.2 LTS]
- **Python バージョン**: [例: Python 3.11]
- **データベース**: [PostgreSQL]
- **キャッシュ**: [Redis（在庫数高速参照）]
- **タスクキュー**: [Celery + Redis（棚卸処理、レポート生成）]
- **ストレージ**: [AWS S3 / ローカル（画像保存）]

### 9.2 フロントエンド
- **テンプレートエンジン**: Django Templates
- **CSSフレームワーク**: [Bootstrap 5]
- **JavaScript**: [Vue.js / Alpine.js（在庫リアルタイム更新）]
- **テーブルライブラリ**: [DataTables / AG Grid]
- **PDF生成**: [WeasyPrint / ReportLab]
- **Excel生成**: [openpyxl]
- **バーコード生成**: [python-barcode / qrcode]

### 9.3 在庫計算・整合性管理
- **トランザクション管理**: @transaction.atomic で入出庫の原子性
- **在庫ロック**: select_for_update() で排他制御
- **引当数制約**: CHECK制約（在庫数 ≥ 引当数）
- **在庫マイナス防止**: 出庫時バリデーション

### 9.4 認証・認可
- **認証方式**: [Django標準認証 / LDAP / SSO]
- **権限管理**: [Django標準Permissions + カスタムPermission]
- **倉庫別データ分離**: [行レベルセキュリティ]

### 9.5 開発・運用ツール
- **バージョン管理**: Git
- **CI/CD**: [GitHub Actions / GitLab CI]
- **デプロイ先**: [AWS / GCP / オンプレミス]
- **Webサーバー**: [Nginx + Gunicorn]
- **監視**: [Sentry / Datadog]

---

## 10. 制約・前提条件

### 10.1 プロジェクト制約
- **予算**: [例: 開発費○○万円、運用費月○○円]
- **納期**: [例: 6ヶ月でMVPリリース]
- **開発体制**: [例: バックエンド2名、フロント1名、倉庫業務経験者1名]
- **既存システム**: [例: 現行Excel管理、データ移行必要]

### 10.2 技術的制約
- [ ] オンプレミス環境必須（クラウド不可）
- [ ] 既存ERP/基幹システムとAPI連携必須
- [ ] ハンディターミナル対応必須
- [ ] バーコード/RFID対応必須
- [ ] その他: ___________

### 10.3 業務的制約
- [ ] 倉庫業務を止められない（段階的移行）
- [ ] 現場作業者のITリテラシー低い
- [ ] 24時間稼働倉庫（システム停止不可）
- [ ] 複数拠点同時稼働
- [ ] その他: ___________

---

## 11. リスクと対応策

| リスク | 影響度 | 発生確率 | 対応策 |
|--------|--------|----------|--------|
| [例: データ移行時の在庫数誤差] | 極大 | 中 | 実地棚卸後に移行、差異ゼロ確認 |
| [例: 在庫数の不整合] | 極大 | 中 | トランザクション管理、排他制御 |
| [例: ハンディ通信障害] | 高 | 中 | オフライン動作、復帰時同期 |
| [例: バーコード読取不良] | 中 | 高 | 手入力補助、複数スキャン対応 |
| [例: 棚卸作業の長時間化] | 中 | 中 | 循環棚卸導入、RFID検討 |
| | | | |

---

## 12. 成功基準（KPI）

### 12.1 定量的指標
- [ ] **在庫精度**: [現状○% → 目標99.9%以上]
- [ ] **欠品率**: [現状○% → 目標0.1%以下]
- [ ] **在庫回転率**: [現状○回 → 目標○回に改善]
- [ ] **過剰在庫削減**: [総在庫金額○%削減]
- [ ] **棚卸作業時間**: [現状○日 → 目標○時間]
- [ ] **入出庫処理時間**: [現状○分/件 → 目標○秒/件]
- [ ] **ピッキング精度**: [目標99.9%]

### 12.2 定性的指標
- [ ] リアルタイムな在庫把握
- [ ] 倉庫作業の効率化
- [ ] 在庫場所の即座特定
- [ ] 欠品による機会損失削減
- [ ] 廃棄ロス削減

---

## 13. 移行計画

### 13.1 データ移行
- **移行対象データ**: 
  - [品目マスタ: ○件]
  - [倉庫・ロケーションマスタ: ○件]
  - [現在庫数: 実地棚卸後の正確な数値]
- **移行方法**: [実地棚卸→CSV作成→一括登録]
- **移行タイミング**: [実地棚卸直後、在庫凍結中]
- **検証方法**: [総在庫数照合、金額照合]

### 13.2 段階的移行計画
```
Phase 1: パイロット倉庫（1ヶ月）
  - 1拠点で試験運用
  - 新旧システム並行稼働
  - 日次在庫数照合
  - 問題点洗い出し

Phase 2: 全倉庫展開（2ヶ月）
  - 全拠点へ展開
  - ハンディターミナル配布
  - 作業者トレーニング
  - 旧システム併用

Phase 3: 完全移行（1ヶ月）
  - 旧システム廃止
  - 全機能稼働
  - 本格運用開始
```

### 13.3 教育訓練
- **倉庫作業者向け**: [ハンディ操作研修2時間、実地研修]
- **倉庫責任者向け**: [システム全体研修5時間]
- **営業・購買向け**: [在庫照会研修1時間]
- **マニュアル**: [操作マニュアル、FAQ、動画（ハンディ操作）]

---

## 14. 在庫管理方式

### 14.1 在庫評価方法
- [ ] 移動平均法
- [ ] 先入先出法（FIFO）
- [ ] 後入先出法（LIFO）
- [ ] 総平均法
- [ ] 個別法

### 14.2 在庫補充方式
- [ ] 定量発注方式（発注点方式）
- [ ] 定期発注方式
- [ ] ダブルビン方式
- [ ] かんばん方式
- [ ] MRP（資材所要量計画）連動

### 14.3 出庫優先順位
- [ ] 先入先出（FIFO）- 賞味期限管理
- [ ] 後入先出（LIFO）
- [ ] ロット指定
- [ ] 有効期限順

---

## 15. 次のステップ

このテンプレートを埋めた後、以下の順序で設計を進めます:

### Step 1: 要件確認・曖昧性解消
- 記載内容の矛盾チェック
- 在庫管理方式の確定
- 倉庫現場担当者へのヒアリング
- 優先機能の確定

### Step 2: データモデル設計（models.py）
- ER図作成（在庫整合性制約）
- Djangoモデル定義
- 在庫ロック機構設計
- 引当数制約設計

### Step 3: 機能設計
- URLルーティング設計
- ビュー設計（CBV）
- 在庫計算ロジック設計
- トランザクション設計

### Step 4: UI設計書作成
- ワイヤーフレーム（PC/ハンディ）
- ハンディターミナルUI設計
- バーコードラベル設計

### Step 5: 外部連携設計
- 販売・購買システムAPI仕様確認
- ハンディターミナル通信方式決定
- バーコードリーダー仕様確認

---

## 記入ガイド

### 🔴 必須項目（絶対に明確化すべき）
- 在庫規模（品目数、倉庫数）
- 在庫管理方式（FIFO/LIFO等）
- 在庫評価方法
- ロット管理要否
- 主要ユーザーロール
- 必須機能（MVP）
- ハンディターミナル要件

### 🟡 重要項目（早期に決定すべき）
- 外部連携要件（販売・購買）
- バーコード/RFID対応範囲
- 棚卸方式（実地/循環）
- 非機能要件（性能・整合性）
- データ移行範囲

### 🟢 推奨項目（設計品質向上）
- 業務フロー詳細化
- AI需要予測要否
- IoT連携要否
- リスクと対応策
- 段階的移行計画

---

## 在庫管理システム特有のチェックリスト

### ✅ 在庫整合性を考慮しているか
- [ ] 入出庫の原子性（トランザクション）
- [ ] 排他制御（在庫ロック）
- [ ] 在庫≧引当数の制約
- [ ] 在庫マイナス防止

### ✅ リアルタイム性を考慮しているか
- [ ] 在庫数のリアルタイム更新
- [ ] 引当数の即時反映
- [ ] 複数ユーザー同時操作対応

### ✅ トレーサビリティを考慮しているか
- [ ] ロット番号管理
- [ ] シリアル番号管理
- [ ] 入出庫履歴記録
- [ ] フォワード・バックワードトレース

### ✅ 倉庫作業効率を考慮しているか
- [ ] ハンディターミナル対応
- [ ] バーコードスキャン
- [ ] ピッキングリスト最適化
- [ ] ロケーション管理

---

## テンプレート使用方法

1. **このファイルをコピー**して、プロジェクト固有の要件を記入
2. **倉庫現場担当者にヒアリング**し、業務フローを確認
3. **不明な項目は「TODO」**と記載し、後で確認
4. **該当しない項目は「N/A」**と記載
5. 記入後、**AIに要件確認を依頼**:
   - 「この在庫管理システム要件定義を確認し、曖昧な点・矛盾を指摘してください」
   - 「この要件に基づいてDjangoモデル設計（在庫整合性制約）を開始してください」
   - 「在庫ロック機構の実装方式を提案してください」
   - 「ハンディターミナル連携の設計を提案してください」

---

**作成日**: 2025-12-08
**バージョン**: 1.0
**作成者**: [記入してください]
**想定システム**: 在庫管理・倉庫管理・ロケーション管理・ロット管理
