# Djangoベース財務会計システム 要件定義テンプレート

## 1. プロジェクト基本情報

### 1.1 プロジェクト概要
- **システム名称**: [例: AccounTech - 統合財務会計システム]
- **目的**: [例: 財務会計業務の自動化、リアルタイム経営分析、決算早期化]
- **対象業種**: [例: 製造業 / サービス業 / 小売業 / IT業 / 複合]
- **企業規模**: [例: 中小企業 / 中堅企業 / 大企業 / グループ企業]
- **会計規模**: 
  - 月間仕訳件数: [例: ○件]
  - 年間売上高: [例: ○億円]
  - 従業員数: [例: ○名]
- **想定ユーザー数**: [例: 経理担当5名、部門担当20名、経営層3名、税理士1名]
- **開発フェーズ**: [プロトタイプ / MVP / 本番環境]

### 1.2 財務会計システムの範囲定義（該当するものに✓）

#### A. 基幹会計機能
- [ ] **仕訳入力・管理**
  - [ ] 手動仕訳入力
  - [ ] 振替伝票入力
  - [ ] 仕訳帳・総勘定元帳
  - [ ] 仕訳承認ワークフロー
  - [ ] 仕訳テンプレート
  - [ ] 複合仕訳（複数借方・貸方）
  - [ ] 定期仕訳（減価償却等）
  - [ ] 外貨建取引（為替換算）

- [ ] **勘定科目管理**
  - [ ] 勘定科目マスタ
  - [ ] 勘定科目体系（階層構造）
  - [ ] 補助科目（取引先別、プロジェクト別等）
  - [ ] 部門別会計
  - [ ] セグメント会計（事業部・拠点別）

#### B. 債権債務管理
- [ ] **売掛金管理**
  - [ ] 売掛金計上
  - [ ] 入金消込
  - [ ] 売掛金残高管理
  - [ ] 請求書発行
  - [ ] 入金予定管理
  - [ ] 督促管理

- [ ] **買掛金管理**
  - [ ] 買掛金計上
  - [ ] 支払消込
  - [ ] 買掛金残高管理
  - [ ] 支払予定管理
  - [ ] 支払データ出力（全銀フォーマット）

#### C. 固定資産管理
- [ ] **固定資産台帳**
  - [ ] 資産登録（取得・除却）
  - [ ] 減価償却計算（定額法・定率法）
  - [ ] 減価償却仕訳自動作成
  - [ ] 資産台帳出力
  - [ ] 少額資産管理

#### D. 予算管理
- [ ] **予算策定**
  - [ ] 年度予算登録
  - [ ] 部門別予算
  - [ ] 勘定科目別予算
  - [ ] 予算修正・補正予算

- [ ] **予実管理**
  - [ ] 予算実績対比表
  - [ ] 予算達成率分析
  - [ ] 差異分析
  - [ ] アラート機能（予算超過）

#### E. 決算処理
- [ ] **月次決算**
  - [ ] 月次決算整理仕訳
  - [ ] 試算表作成
  - [ ] 残高確認
  - [ ] 月次決算承認

- [ ] **年次決算**
  - [ ] 決算整理仕訳
  - [ ] 決算振替仕訳
  - [ ] 損益計算書（P/L）
  - [ ] 貸借対照表（B/S）
  - [ ] キャッシュフロー計算書（C/F）
  - [ ] 株主資本等変動計算書
  - [ ] 注記表

- [ ] **税務申告対応**
  - [ ] 法人税申告書データ作成
  - [ ] 消費税申告書データ作成
  - [ ] 地方税申告書データ作成
  - [ ] 税効果会計

#### F. 管理会計
- [ ] **原価計算**
  - [ ] 個別原価計算
  - [ ] 総合原価計算
  - [ ] 標準原価計算
  - [ ] 原価差異分析

- [ ] **損益分析**
  - [ ] 部門別損益
  - [ ] 製品別損益
  - [ ] プロジェクト別損益
  - [ ] 得意先別損益

#### G. 資金管理
- [ ] **資金繰り管理**
  - [ ] 資金繰り表作成
  - [ ] 入出金予定管理
  - [ ] 資金予測
  - [ ] 銀行口座残高管理

- [ ] **銀行取引管理**
  - [ ] 銀行口座マスタ
  - [ ] 入出金明細取込（API連携）
  - [ ] 銀行明細自動仕訳
  - [ ] 残高照合

#### H. 連結会計（グループ企業の場合）
- [ ] **連結決算**
  - [ ] 子会社データ取込
  - [ ] 連結仕訳
  - [ ] 内部取引消去
  - [ ] 連結財務諸表作成

#### I. レポート・分析
- [ ] **財務諸表**
  - [ ] 損益計算書
  - [ ] 貸借対照表
  - [ ] キャッシュフロー計算書
  - [ ] 製造原価報告書
  - [ ] 株主資本等変動計算書

- [ ] **管理レポート**
  - [ ] 試算表（月次・四半期・年次）
  - [ ] 部門別損益計算書
  - [ ] 勘定科目別推移表
  - [ ] 経営分析レポート（収益性・安全性・効率性）
  - [ ] セグメント別分析

- [ ] **帳票出力**
  - [ ] 仕訳帳
  - [ ] 総勘定元帳
  - [ ] 補助元帳（得意先・仕入先別）
  - [ ] 残高試算表
  - [ ] 合計残高試算表

---

## 2. ビジネス要件

### 2.1 解決したい課題（優先度: 高/中/低）
| 課題 | 現状 | 理想 | 優先度 |
|------|------|------|--------|
| [例: 手入力による仕訳ミス] | [手作業、月○件のミス発生] | [自動仕訳、チェック機能強化] | 高 |
| [例: 決算期間の長期化] | [月次決算に○日、年次○ヶ月] | [月次○日、年次○週間に短縮] | 高 |
| [例: リアルタイム経営判断不可] | [前月実績は翌月中旬にしか見れない] | [日次で経営数値確認可能] | 中 |
| [例: 部門別損益の不透明性] | [部門別集計が手作業、時間かかる] | [自動集計、リアルタイム確認] | 中 |
| [例: 税務申告の手戻り] | [税理士とのやり取りで何度も修正] | [システムで事前チェック] | 高 |
| | | | |

### 2.2 主要ユーザーロール
| ロール名 | 主な業務 | 権限レベル | 人数 | 利用デバイス |
|----------|----------|------------|------|--------------|
| [例: 経理担当] | [仕訳入力、月次決算] | [入力・参照] | [5名] | [PC] |
| [例: 経理責任者] | [仕訳承認、決算承認] | [承認権限] | [2名] | [PC/タブレット] |
| [例: 部門担当] | [部門別実績確認、予算管理] | [参照のみ] | [20名] | [PC/スマホ] |
| [例: 経営層（CFO等）] | [財務諸表確認、経営分析] | [全データ参照] | [3名] | [PC/タブレット] |
| [例: 税理士] | [決算データ確認、申告書作成] | [参照・一部編集] | [1名] | [PC] |
| [例: 監査人] | [監査証跡確認] | [参照のみ] | [不定期] | [PC] |
| | | | | |

### 2.3 業務フロー（代表的なもの）

#### フロー1: 日次仕訳入力フロー
```
1. 取引発生（売上・仕入・経費等）
2. 証憑書類受領（請求書・領収書等）
3. 仕訳入力（手動 or 自動連携）
4. 仕訳承認（経理責任者）
5. 総勘定元帳へ転記
```

#### フロー2: 月次決算フロー
```
1. 当月仕訳締め処理
2. 月次決算整理仕訳入力
   - 減価償却費計上
   - 経過勘定（前払費用・未払費用）
   - 引当金繰入
3. 試算表作成
4. 部門別損益集計
5. 残高確認（現預金・売掛金・買掛金）
6. 月次決算承認
7. 月次決算報告書作成
8. 経営層へ報告
```

#### フロー3: 年次決算フロー
```
1. 12月仕訳締め処理（3月決算の場合）
2. 決算整理仕訳入力
   - 棚卸資産計上
   - 減価償却費計上
   - 引当金計上（貸倒引当金等）
   - 税効果会計
3. 決算振替仕訳
   - 損益勘定振替
   - 繰越利益剰余金計上
4. 財務諸表作成（P/L、B/S、C/F）
5. 決算承認
6. 税務申告書作成（法人税・消費税・地方税）
7. 株主総会資料作成
8. 確定申告
```

#### フロー4: 売掛金管理フロー
```
1. 売上計上（売掛金発生）
2. 請求書発行
3. 入金予定登録
4. 入金確認（銀行明細取込）
5. 入金消込（売掛金 → 現預金）
6. 未収金確認
7. 督促処理（期日超過の場合）
```

#### フロー5: 買掛金管理フロー
```
1. 仕入計上（買掛金発生）
2. 請求書受領
3. 三点照合（発注・納品・請求）
4. 支払予定登録
5. 支払承認
6. 支払実行（全銀データ作成）
7. 支払消込（買掛金 → 現預金）
```

#### フロー6: 固定資産管理フロー
```
1. 固定資産取得
2. 資産台帳登録
3. 減価償却計算（月次 or 年次）
4. 減価償却仕訳自動作成
5. 固定資産台帳更新
6. 除却・売却時の処理
```

**記載してください:**
- [ ] 日次仕訳入力フロー
- [ ] 月次決算フロー
- [ ] 年次決算フロー
- [ ] 売掛金管理フロー
- [ ] 買掛金管理フロー
- [ ] 固定資産管理フロー
- [ ] 予算策定・予実管理フロー
- [ ] その他重要フロー

---

## 3. 機能要件

### 3.1 必須機能（MVP）
| 機能カテゴリ | 機能名 | 詳細 | 優先度 |
|--------------|--------|------|--------|
| 仕訳管理 | 仕訳入力 | 借方・貸方入力、勘定科目選択 | 必須 |
| | 仕訳一覧 | 検索・絞込、期間指定 | 必須 |
| | 仕訳承認 | 承認ワークフロー | 高 |
| | 仕訳修正・削除 | 承認前のみ編集可能 | 必須 |
| | 仕訳インポート | CSV一括取込 | 高 |
| 勘定科目管理 | 勘定科目マスタ | CRUD操作、階層構造 | 必須 |
| | 補助科目マスタ | 取引先・部門・プロジェクト別 | 必須 |
| 帳簿 | 仕訳帳 | 時系列表示、PDF出力 | 必須 |
| | 総勘定元帳 | 勘定科目別集計 | 必須 |
| | 補助元帳 | 得意先・仕入先別 | 高 |
| 試算表 | 残高試算表 | 月次・四半期・年次 | 必須 |
| | 合計残高試算表 | 借方・貸方合計表示 | 必須 |
| 財務諸表 | 損益計算書（P/L） | 月次・年次 | 必須 |
| | 貸借対照表（B/S） | 月次・年次 | 必須 |
| | キャッシュフロー計算書 | 年次 | 高 |
| 債権債務管理 | 売掛金残高一覧 | 取引先別残高 | 必須 |
| | 買掛金残高一覧 | 取引先別残高 | 必須 |
| | 入金消込 | 売掛金消込処理 | 必須 |
| | 支払消込 | 買掛金消込処理 | 必須 |
| 固定資産管理 | 固定資産台帳 | 資産一覧、減価償却累計 | 高 |
| | 減価償却計算 | 定額法・定率法 | 高 |
| | 減価償却仕訳作成 | 自動仕訳生成 | 高 |
| 決算処理 | 月次決算締め | 仕訳締め処理 | 必須 |
| | 決算整理仕訳 | テンプレート利用 | 必須 |
| | 決算承認 | 承認ワークフロー | 高 |
| マスタ管理 | 取引先マスタ | 得意先・仕入先情報 | 必須 |
| | 部門マスタ | 部門別管理 | 高 |
| | 銀行口座マスタ | 口座情報管理 | 必須 |
| | 税区分マスタ | 消費税区分設定 | 必須 |

**追加機能を記載:**
| | | | |

### 3.2 将来対応機能（Phase 2以降）
- [ ] **AI仕訳提案** - 過去データから仕訳パターン学習、自動提案
- [ ] **OCR証憑読取** - 領収書・請求書スキャン自動仕訳化
- [ ] **電子帳簿保存法完全対応** - タイムスタンプ、電子署名
- [ ] **XBRL対応** - 財務諸表の標準フォーマット出力
- [ ] **連結会計** - 子会社データ取込、連結財務諸表
- [ ] **多通貨対応** - 外貨建取引、為替換算
- [ ] **多言語対応** - 英語・中国語決算書
- [ ] **BI連携** - Tableau、Power BI等への連携
- [ ] **RPA連携** - 定型仕訳の自動化
- [ ] **ブロックチェーン証跡** - 改ざん防止

---

## 4. 非機能要件

### 4.1 性能要件
- **同時アクセス数**: [例: 最大50ユーザー]
- **レスポンスタイム**: 
  - 画面表示: [例: 3秒以内]
  - 試算表生成: [例: 10秒以内（10万仕訳）]
  - 財務諸表生成: [例: 30秒以内]
- **データ保持期間**: [例: 仕訳データ永久保存（法定要件）]
- **データ量見積**: 
  - 月間仕訳件数: [例: 10,000件]
  - 年間仕訳件数: [例: 120,000件]
  - 累積仕訳データ: [例: 10年で120万件]

### 4.2 セキュリティ要件
- [ ] **認証**
  - ユーザー認証: [Django標準認証 / LDAP / SSO / 二段階認証]
  - 税理士用アカウント: [限定権限、期間制限]
  
- [ ] **権限管理**
  - ロールベースアクセス制御（RBAC）
  - 部門別データ分離
  - 仕訳承認権限管理
  - 監査ログ記録（誰が・いつ・何を）
  
- [ ] **データ保護**
  - 財務データの暗号化
  - バックアップ（日次・週次・月次）
  - ディザスタリカバリ（DR）対策
  - アクセス制限（IPアドレス制限等）

- [ ] **電子帳簿保存法対応**
  - タイムスタンプ
  - 電子署名
  - 訂正削除履歴
  - 検索機能（取引年月日、勘定科目、金額）

### 4.3 可用性要件
- **稼働時間**: [例: 24時間365日（決算期は特に重要）]
- **目標稼働率**: [例: 99.9%（年間ダウンタイム8.76時間以内）]
- **保守時間**: [例: 月1回、日曜深夜2時間]
- **障害復旧**: 
  - クリティカル障害: [2時間以内復旧（決算期）]
  - 通常障害: [4時間以内復旧]

### 4.4 法令対応（極めて重要）
- [ ] **会社法** - 計算書類の保存義務（10年間）
- [ ] **法人税法** - 帳簿書類の保存義務（7年間、最長10年）
- [ ] **電子帳簿保存法** - 電子データ保存要件
- [ ] **消費税法** - 適格請求書（インボイス）対応
- [ ] **金融商品取引法** - 有価証券報告書（上場企業）
- [ ] **税効果会計基準** - 税効果会計の適用
- [ ] **IFRS** - 国際会計基準（グローバル企業）

### 4.5 監査対応
- [ ] **内部監査**
  - 監査証跡（仕訳履歴、承認履歴）
  - アクセスログ
  - 変更履歴

- [ ] **外部監査（会計監査）**
  - 監査法人へのデータ提供
  - 監査調書出力
  - サンプル抽出機能

---

## 5. データモデル要件

### 5.1 主要エンティティ（想定）

#### 仕訳（JournalEntry）
- [ ] 仕訳ID
- [ ] 伝票番号（自動採番）
- [ ] 伝票日付
- [ ] 会計期間（年度・月）
- [ ] 入力者（ユーザー）
- [ ] 承認者（ユーザー）
- [ ] 承認ステータス（未承認/承認済/却下）
- [ ] 承認日時
- [ ] 伝票種別（振替/入金/出金/売上/仕入）
- [ ] 摘要（取引内容説明）
- [ ] 締めフラグ（月次締め後は修正不可）
- [ ] 作成日時、更新日時
- [ ] その他: ___________

#### 仕訳明細（JournalEntryLine）
- [ ] 明細ID
- [ ] 仕訳ID（外部キー）
- [ ] 明細行番号
- [ ] 借方貸方区分（借方/貸方）
- [ ] 勘定科目（外部キー）
- [ ] 補助科目（外部キー、任意）
- [ ] 部門（外部キー、任意）
- [ ] プロジェクト（外部キー、任意）
- [ ] 税区分（外部キー）
- [ ] 金額
- [ ] 消費税額
- [ ] 摘要
- [ ] その他: ___________

#### 勘定科目（Account）
- [ ] 勘定科目ID
- [ ] 勘定科目コード
- [ ] 勘定科目名
- [ ] 勘定科目名カナ
- [ ] 勘定科目区分（資産/負債/純資産/収益/費用）
- [ ] 親勘定科目（外部キー、階層構造）
- [ ] 表示順序
- [ ] 貸借区分（借方/貸方）
- [ ] 補助科目使用フラグ
- [ ] 部門別管理フラグ
- [ ] 消費税区分デフォルト
- [ ] ステータス（有効/無効）
- [ ] その他: ___________

#### 補助科目（SubAccount）
- [ ] 補助科目ID
- [ ] 勘定科目（外部キー）
- [ ] 補助科目コード
- [ ] 補助科目名
- [ ] 補助科目区分（取引先/プロジェクト/その他）
- [ ] 取引先（外部キー、取引先マスタと紐付け）
- [ ] ステータス（有効/無効）
- [ ] その他: ___________

#### 部門（Department）
- [ ] 部門ID
- [ ] 部門コード
- [ ] 部門名
- [ ] 親部門（外部キー、階層構造）
- [ ] 部門種別（本社/支店/事業部/工場）
- [ ] 責任者
- [ ] 表示順序
- [ ] ステータス（有効/無効）
- [ ] その他: ___________

#### 取引先（Customer）
- [ ] 取引先ID
- [ ] 取引先コード
- [ ] 取引先名
- [ ] 取引先名カナ
- [ ] 取引先区分（得意先/仕入先/両方）
- [ ] 郵便番号
- [ ] 住所
- [ ] 電話番号
- [ ] 担当者
- [ ] 支払条件・回収条件
- [ ] ステータス（有効/無効）
- [ ] その他: ___________

#### 税区分（TaxCategory）
- [ ] 税区分ID
- [ ] 税区分コード
- [ ] 税区分名（課税売上10% / 軽減税率8% / 非課税等）
- [ ] 税率（%）
- [ ] 消費税勘定科目（外部キー）
- [ ] 適用開始日
- [ ] 適用終了日
- [ ] その他: ___________

#### 固定資産（FixedAsset）
- [ ] 固定資産ID
- [ ] 資産番号
- [ ] 資産名
- [ ] 資産区分（建物/機械/車両/工具器具備品/ソフトウェア等）
- [ ] 取得日
- [ ] 取得価額
- [ ] 耐用年数
- [ ] 償却方法（定額法/定率法）
- [ ] 残存価額
- [ ] 期首帳簿価額
- [ ] 減価償却累計額
- [ ] 期末帳簿価額
- [ ] 除却日
- [ ] ステータス（使用中/除却済）
- [ ] その他: ___________

#### 予算（Budget）
- [ ] 予算ID
- [ ] 会計年度
- [ ] 予算種別（当初予算/補正予算）
- [ ] 勘定科目（外部キー）
- [ ] 部門（外部キー、任意）
- [ ] 予算月度（1-12月）
- [ ] 予算金額
- [ ] 作成日、承認日
- [ ] その他: ___________

#### 決算期間（FiscalPeriod）
- [ ] 期間ID
- [ ] 会計年度（例: 2024年度）
- [ ] 期首日（例: 2024-04-01）
- [ ] 期末日（例: 2025-03-31）
- [ ] 決算ステータス（進行中/月次締め済/年次締め済）
- [ ] その他: ___________

#### 銀行口座（BankAccount）
- [ ] 口座ID
- [ ] 銀行名
- [ ] 支店名
- [ ] 口座種別（普通/当座）
- [ ] 口座番号
- [ ] 口座名義
- [ ] 勘定科目（外部キー）
- [ ] ステータス（有効/無効）
- [ ] その他: ___________

#### 銀行明細（BankTransaction）
- [ ] 明細ID
- [ ] 銀行口座（外部キー）
- [ ] 取引日
- [ ] 取引種別（入金/出金/振替）
- [ ] 金額
- [ ] 残高
- [ ] 摘要
- [ ] 仕訳連携済フラグ
- [ ] 仕訳ID（外部キー、連携後）
- [ ] その他: ___________

### 5.2 追加エンティティ
必要に応じて追加してください:
- [ ] 承認ルートマスタ（金額別承認ルート）
- [ ] 仕訳テンプレートマスタ（定型仕訳）
- [ ] 為替レートマスタ（外貨対応時）
- [ ] 連結会社マスタ（連結会計時）
- [ ] 配賦基準マスタ（配賦計算時）
- [ ] 原価要素マスタ（原価計算時）
- [ ] 監査証跡（Audit Log）
- [ ] その他: ___________

---

## 6. 画面要件

### 6.1 必須画面リスト（管理画面）

| 画面カテゴリ | 画面名 | 主要機能 | アクセス権限 |
|--------------|--------|----------|--------------|
| ダッシュボード | トップページ | 月次損益サマリ、未承認仕訳件数、KPI | 全ユーザー |
| | 経営ダッシュボード | 売上・利益推移グラフ、予算対比 | 経営層 |
| 仕訳管理 | 仕訳入力（振替伝票） | 借方・貸方入力、勘定科目選択 | 経理担当 |
| | 仕訳一覧 | 検索・絞込、期間指定 | 経理担当 |
| | 仕訳承認 | 承認・却下 | 経理責任者 |
| | 仕訳インポート | CSV一括取込 | 経理担当 |
| | 仕訳エクスポート | CSV出力 | 経理担当 |
| 帳簿 | 仕訳帳 | 時系列表示、PDF出力 | 経理担当 |
| | 総勘定元帳 | 勘定科目別集計、PDF出力 | 経理担当 |
| | 補助元帳 | 得意先・仕入先別、PDF出力 | 経理担当 |
| 試算表 | 残高試算表 | 月次・四半期・年次、PDF/Excel出力 | 経理担当 |
| | 合計残高試算表 | 借方・貸方合計表示 | 経理担当 |
| | 部門別試算表 | 部門別集計 | 部門担当・経営層 |
| 財務諸表 | 損益計算書（P/L） | 月次・四半期・年次、比較表示 | 経理担当・経営層 |
| | 貸借対照表（B/S） | 月次・年次、資産負債純資産表示 | 経理担当・経営層 |
| | キャッシュフロー計算書 | 年次、直接法・間接法 | 経理担当・経営層 |
| | 製造原価報告書 | 製造業の場合 | 経理担当・経営層 |
| 債権債務管理 | 売掛金残高一覧 | 取引先別残高、年齢調べ | 経理担当 |
| | 買掛金残高一覧 | 取引先別残高 | 経理担当 |
| | 入金消込 | 売掛金消込処理 | 経理担当 |
| | 支払消込 | 買掛金消込処理 | 経理担当 |
| | 未収金一覧 | 回収予定日管理 | 経理担当 |
| | 未払金一覧 | 支払予定日管理 | 経理担当 |
| 固定資産管理 | 固定資産台帳 | 資産一覧、減価償却累計 | 経理担当 |
| | 固定資産登録 | 取得・除却処理 | 経理担当 |
| | 減価償却計算 | 月次・年次計算実行 | 経理担当 |
| | 減価償却仕訳作成 | 自動仕訳生成 | 経理担当 |
| 予算管理 | 予算登録 | 勘定科目別・部門別予算入力 | 経理担当 |
| | 予実対比表 | 予算実績対比、達成率表示 | 部門担当・経営層 |
| | 予算修正 | 補正予算登録 | 経理責任者 |
| 決算処理 | 月次決算締め | 仕訳締め処理 | 経理責任者 |
| | 決算整理仕訳 | テンプレート利用、一括作成 | 経理担当 |
| | 決算承認 | 月次・年次決算承認 | 経理責任者 |
| | 決算チェックリスト | 決算作業進捗管理 | 経理担当 |
| マスタ管理 | 勘定科目マスタ | CRUD操作、階層表示 | 経理責任者 |
| | 補助科目マスタ | CRUD操作 | 経理担当 |
| | 取引先マスタ | CRUD操作、CSV一括登録 | 経理担当 |
| | 部門マスタ | CRUD操作、階層表示 | 経理責任者 |
| | 税区分マスタ | CRUD操作 | 経理責任者 |
| | 銀行口座マスタ | CRUD操作 | 経理担当 |
| レポート | 経営分析レポート | 収益性・安全性・効率性指標 | 経営層 |
| | 部門別損益計算書 | 部門別P/L | 部門担当・経営層 |
| | 勘定科目別推移表 | 月次推移グラフ | 経理担当・経営層 |
| | セグメント別分析 | 事業部・拠点別 | 経営層 |
| 設定 | ユーザー管理 | ユーザー登録、権限設定 | システム管理者 |
| | 会計期間設定 | 年度設定、期首期末日設定 | システム管理者 |
| | 承認ルート設定 | 金額別承認ルート | システム管理者 |
| | システム設定 | 基本設定、マスタ設定 | システム管理者 |

### 6.2 モバイル対応画面（レスポンシブ）

| 画面名 | 主要機能 | デバイス |
|--------|----------|----------|
| 経営ダッシュボード | KPI確認、グラフ表示 | タブレット/スマホ |
| 仕訳承認 | 承認・却下 | タブレット/スマホ |
| 損益計算書 | P/L確認 | タブレット/スマホ |
| 貸借対照表 | B/S確認 | タブレット |
| 部門別損益 | 部門実績確認 | スマホ/タブレット |

### 6.3 画面の優先度
- **Phase 1 (MVP)**: 
  - [仕訳入力・一覧、勘定科目マスタ、総勘定元帳、試算表、P/L、B/S]
- **Phase 2**: 
  - [売掛金・買掛金管理、固定資産管理、予算管理、月次決算]
- **Phase 3**: 
  - [キャッシュフロー計算書、連結会計、高度な分析機能]

---

## 7. UI/UX要件

### 7.1 デザイン方針
- [ ] **専門性と使いやすさの両立** - 会計専門用語を正確に使用しつつ直感的UI
- [ ] **数字の視認性重視** - 大きなフォント、桁区切り明確、マイナス赤字表示
- [ ] レスポンシブデザイン（PC優先、タブレット対応）
- [ ] カラースキーム: [例: ブルー系・信頼感、数字は黒・赤（マイナス）]
- [ ] アクセシビリティ対応（WCAG 2.1 AA準拠）

### 7.2 UI要素の方針
- **ナビゲーション**: [サイドバー（勘定科目ツリー表示）]
- **テーブル表示**: [固定ヘッダー、借方・貸方の明確な列分離]
- **数値入力**: [自動桁区切り、カンマ表示、マイナス入力対応]
- **日付入力**: [カレンダーピッカー、決算期を考慮したデフォルト値]
- **勘定科目選択**: [階層表示、インクリメンタルサーチ]
- **通知**: [決算締め日アラート、承認依頼通知]

### 7.3 操作性要件
- [ ] **キーボードショートカット** - 仕訳入力高速化（Tab移動、Enter確定）
- [ ] **仕訳テンプレート** - 定型仕訳のワンクリック入力
- [ ] **勘定科目コード入力** - コード入力で科目自動選択
- [ ] **借方貸方一致チェック** - リアルタイムバリデーション
- [ ] **CSV一括操作** - 仕訳インポート/エクスポート
- [ ] **PDF/Excel出力** - 全帳票対応
- [ ] **ドリルダウン** - 試算表→総勘定元帳→仕訳詳細へ遷移

---

## 8. 外部連携要件

### 8.1 販売管理システム連携
- [ ] **売上データ取込** - 売上仕訳自動作成
- [ ] **売掛金データ連携** - 売掛金残高同期

### 8.2 購買・在庫管理システム連携
- [ ] **仕入データ取込** - 仕入仕訳自動作成
- [ ] **買掛金データ連携** - 買掛金残高同期
- [ ] **在庫データ取込** - 棚卸資産計上

### 8.3 給与システム連携
- [ ] **給与データ取込** - 人件費仕訳自動作成
- [ ] **社会保険料データ取込** - 法定福利費計上

### 8.4 銀行API連携
- [ ] **銀行明細自動取込** - 全銀協API、各銀行API
- [ ] **自動仕訳作成** - 銀行明細から仕訳生成
- [ ] **残高照合** - システム残高と銀行残高照合

### 8.5 税務申告システム連携
- [ ] **法人税申告ソフト連携** - 達人、魔法陣等
- [ ] **消費税申告データ出力** - 消費税区分別集計
- [ ] **電子申告（e-Tax）データ出力** - XML形式

### 8.6 その他連携
- [ ] **クラウドストレージ連携** - 証憑書類保管（Box、Dropbox等）
- [ ] **電子契約サービス** - 契約書の仕訳連携
- [ ] **経費精算システム** - 経費仕訳取込
- [ ] **BI/DWH連携** - データ分析基盤へのデータ提供

---

## 9. 技術要件

### 9.1 Django技術スタック
- **Djangoバージョン**: [例: Django 4.2 LTS]
- **Python バージョン**: [例: Python 3.11]
- **データベース**: [PostgreSQL（数値型精度重要）]
- **キャッシュ**: [Redis（試算表・財務諸表の高速化）]
- **タスクキュー**: [Celery + Redis（月次締め、減価償却計算等）]
- **ストレージ**: [AWS S3 / GCP Cloud Storage（PDF・証憑保管）]

### 9.2 フロントエンド
- **テンプレートエンジン**: Django Templates
- **CSSフレームワーク**: [Bootstrap 5 / Tailwind CSS]
- **JavaScript**: [Vue.js / React（仕訳入力画面の複雑なUI）]
- **テーブルライブラリ**: [AG Grid（大量データ表示）]
- **PDF生成**: [WeasyPrint / ReportLab]
- **Excel生成**: [openpyxl / xlsxwriter]
- **チャートライブラリ**: [Chart.js / Highcharts]

### 9.3 数値計算・精度管理
- **Decimalフィールド使用** - FloatではなくDecimalで金額管理
- **丸め処理の統一** - 四捨五入、切り捨て、切り上げのルール明確化
- **複式簿記チェック** - 借方合計=貸方合計のバリデーション

### 9.4 認証・認可
- **認証方式**: [Django標準認証 / LDAP / SSO / 二段階認証]
- **権限管理**: [Django標準Permissions + カスタムPermission]
- **部門別データ分離**: [行レベルセキュリティ]

### 9.5 開発・運用ツール
- **バージョン管理**: Git
- **CI/CD**: [GitHub Actions / GitLab CI]
- **デプロイ先**: [AWS / GCP / Azure / オンプレミス]
- **Webサーバー**: [Nginx + Gunicorn]
- **監視**: [Sentry / Datadog / CloudWatch]
- **バックアップ**: [PostgreSQL pg_dump、S3自動バックアップ]

---

## 10. 制約・前提条件

### 10.1 プロジェクト制約
- **予算**: [例: 開発費○○万円、運用費月○○円]
- **納期**: [例: 1年で本番稼働、次期決算から利用]
- **開発体制**: [例: バックエンド3名、フロント2名、会計専門家1名]
- **既存システム**: [例: 現行パッケージ会計ソフト、データ移行必要]

### 10.2 技術的制約
- [ ] オンプレミス環境必須（クラウド不可）
- [ ] 既存ERP/基幹システムとAPI連携必須
- [ ] 既存税務申告ソフトとデータ連携必須
- [ ] 高精度数値計算必須（Decimal型）
- [ ] その他: ___________

### 10.3 業務的制約
- [ ] 現行会計期間中の移行は不可（期首切り替え）
- [ ] 税理士・監査法人の承認必要
- [ ] 勘定科目体系は既存踏襲
- [ ] 決算期は変更不可
- [ ] その他: ___________

### 10.4 法令・規制対応（最重要）
- [ ] 電子帳簿保存法対応必須（2024年1月施行）
- [ ] 法人税法・会社法対応必須
- [ ] 消費税法（インボイス制度）対応必須
- [ ] 監査法人の監査対応可能な証跡管理
- [ ] その他: ___________

---

## 11. リスクと対応策

| リスク | 影響度 | 発生確率 | 対応策 |
|--------|--------|----------|--------|
| [例: データ移行失敗] | 極大 | 中 | 段階的移行、十分なテスト期間、ロールバック計画 |
| [例: 決算期の障害] | 極大 | 低 | 高可用性構成、24時間サポート体制 |
| [例: 税務申告ミス] | 極大 | 中 | 税理士監修、事前チェック機能充実 |
| [例: 数値計算誤差] | 高 | 中 | Decimal型使用、丸め処理統一、検証強化 |
| [例: 法改正対応遅延] | 高 | 中 | 法改正情報の定期確認、柔軟なシステム設計 |
| [例: 不正アクセス・データ改ざん] | 極大 | 低 | 強固な認証、監査ログ、バックアップ、DR対策 |
| | | | |

---

## 12. 成功基準（KPI）

### 12.1 定量的指標
- [ ] **月次決算早期化**: [現状○日 → 目標○日（50%削減）]
- [ ] **年次決算早期化**: [現状○ヶ月 → 目標○週間]
- [ ] **仕訳入力時間**: [現状○分/件 → 目標○分/件（30%削減）]
- [ ] **仕訳入力ミス率**: [現状○% → 目標0.1%以下]
- [ ] **システム稼働率**: [目標99.9%]
- [ ] **財務諸表生成時間**: [目標30秒以内]

### 12.2 定性的指標
- [ ] 経理担当の業務負担軽減
- [ ] リアルタイムな経営判断が可能
- [ ] 税務申告の正確性向上
- [ ] 監査対応の効率化
- [ ] 部門別損益の可視化

---

## 13. 移行計画

### 13.1 データ移行
- **移行対象データ**: 
  - [勘定科目マスタ: ○件]
  - [取引先マスタ: ○件]
  - [前期繰越残高: 資産・負債・純資産]
  - [過去仕訳データ: 直近○年分]
- **移行方法**: [CSV一括登録 / API連携 / 手動入力]
- **移行タイミング**: [新会計年度期首（例: 4月1日）]
- **検証方法**: [試算表照合、貸借一致確認]

### 13.2 段階的移行計画
```
Phase 1: 並行稼働（3ヶ月）
  - 新旧システム同時運用
  - 新システムで仕訳入力、旧システムで決算
  - 月次で数値照合
  - 問題点洗い出し・改善

Phase 2: 部分移行（3ヶ月）
  - 新システムで月次決算まで実施
  - 年次決算は旧システム
  - 税理士レビュー

Phase 3: 完全移行（新会計年度期首）
  - 全業務を新システムへ
  - 旧システム廃止
  - 本格運用開始
```

### 13.3 教育訓練
- **経理担当向け**: [システム操作研修5時間×3回、決算手順研修]
- **経理責任者向け**: [承認・決算承認研修3時間]
- **部門担当向け**: [予実管理・レポート確認研修2時間]
- **税理士向け**: [システム概要、データ出力方法研修2時間]
- **マニュアル**: [操作マニュアル、決算マニュアル、FAQ、動画]

---

## 14. 会計基準・勘定科目体系

### 14.1 適用会計基準
- [ ] 日本基準（企業会計原則）
- [ ] IFRS（国際会計基準）
- [ ] 米国基準（US GAAP）
- [ ] 業種別会計基準: ___________

### 14.2 勘定科目体系（例: 日本基準）
```
■ 資産の部
  流動資産
    - 現金及び預金
    - 受取手形
    - 売掛金
    - 棚卸資産（商品、製品、仕掛品、原材料）
    - その他流動資産
  固定資産
    有形固定資産
      - 建物
      - 機械装置
      - 車両運搬具
      - 工具器具備品
      - 土地
    無形固定資産
      - ソフトウェア
      - のれん
    投資その他の資産
      - 投資有価証券
      - 長期貸付金

■ 負債の部
  流動負債
    - 支払手形
    - 買掛金
    - 短期借入金
    - 未払金
    - 未払費用
  固定負債
    - 長期借入金
    - 退職給付引当金

■ 純資産の部
  - 資本金
  - 資本剰余金
  - 利益剰余金

■ 収益
  - 売上高
  - その他営業収益

■ 費用
  - 売上原価
  - 販売費及び一般管理費
    - 給料手当
    - 福利厚生費
    - 減価償却費
    - 賃借料
    - 通信費
    - 旅費交通費
  - 営業外費用
    - 支払利息
```

### 14.3 消費税区分
- [ ] 課税売上10%
- [ ] 課税売上8%（軽減税率）
- [ ] 課税仕入10%
- [ ] 課税仕入8%（軽減税率）
- [ ] 非課税
- [ ] 不課税
- [ ] 免税

---

## 15. 次のステップ

このテンプレートを埋めた後、以下の順序で設計を進めます:

### Step 1: 要件確認・曖昧性解消
- 記載内容の矛盾チェック
- 会計基準・勘定科目体系の確定
- 税理士・監査法人との要件確認
- 優先機能の確定

### Step 2: データモデル設計（models.py）
- ER図作成（複式簿記の設計）
- Djangoモデル定義（Decimal型使用）
- リレーションシップ確定
- 借方貸方一致制約

### Step 3: 機能設計
- URLルーティング設計
- ビュー設計（CBV）
- フォーム設計（仕訳入力）
- 計算ロジック設計（減価償却、税額計算等）

### Step 4: UI設計書作成
- ワイヤーフレーム（仕訳入力画面重点）
- 画面レイアウト詳細
- 帳票フォーマット設計（P/L、B/S等）

### Step 5: 外部連携設計
- 販売・購買システムAPI仕様確認
- 銀行API連携方式決定
- 税務申告ソフト連携仕様

---

## 記入ガイド

### 🔴 必須項目（絶対に明確化すべき）
- 適用会計基準
- 勘定科目体系
- 会計期間（期首・期末）
- 主要ユーザーロール
- 必須機能（MVP）
- 法令対応要件
- データ移行範囲

### 🟡 重要項目（早期に決定すべき）
- 外部連携要件（販売・購買・銀行）
- 税務申告ソフト連携
- 数値計算精度要件
- 非機能要件（性能・セキュリティ）
- 監査対応要件

### 🟢 推奨項目（設計品質向上）
- 業務フロー詳細化
- AI仕訳提案要否
- OCR証憑読取要否
- リスクと対応策
- 段階的移行計画

---

## 財務会計システム特有のチェックリスト

### ✅ 複式簿記の原則を遵守しているか
- [ ] 借方合計=貸方合計
- [ ] 仕訳の二重計上防止
- [ ] 貸借対照表の貸借一致
- [ ] 期首残高と期末残高の整合性

### ✅ 法令対応を考慮しているか
- [ ] 電子帳簿保存法（タイムスタンプ、検索要件）
- [ ] 法人税法・会社法（帳簿保存期間）
- [ ] 消費税法（インボイス制度）
- [ ] 監査証跡の記録

### ✅ 数値精度を考慮しているか
- [ ] Decimal型使用（Float使用禁止）
- [ ] 丸め処理の統一
- [ ] 桁あふれ対策
- [ ] 為替換算の精度

### ✅ 決算処理を考慮しているか
- [ ] 月次締め処理（締め後修正不可）
- [ ] 決算整理仕訳
- [ ] 決算振替仕訳
- [ ] 財務諸表自動生成

---

## テンプレート使用方法

1. **このファイルをコピー**して、プロジェクト固有の要件を記入
2. **税理士・監査法人に相談**し、会計基準・勘定科目体系を確定
3. **不明な項目は「TODO」**と記載し、後で確認
4. **該当しない項目は「N/A」**と記載
5. 記入後、**AIに要件確認を依頼**:
   - 「この財務会計システム要件定義を確認し、曖昧な点・矛盾を指摘してください」
   - 「この要件に基づいてDjangoモデル設計（複式簿記）を開始してください」
   - 「勘定科目マスタのデータ構造を設計してください」
   - 「仕訳入力画面のUI設計を提案してください」

---

**作成日**: 2025-12-08
**バージョン**: 1.0
**作成者**: [記入してください]
**監修**: [税理士名/会計事務所名]
**想定システム**: 財務会計・管理会計・決算・税務申告
